!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Jet=e():t.Jet=e()}(this,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{JetAccordion:()=>k,JetAutocomplete:()=>f,JetButton:()=>b,JetCaptcha:()=>u,JetDate:()=>v,JetDropdown:()=>T,JetFavorite:()=>n,JetFields:()=>d,JetFile:()=>g,JetFilter:()=>a,JetInput:()=>y,JetMansory:()=>C,JetMask:()=>m,JetPagination:()=>w,JetRange:()=>E,JetRender:()=>s,JetRouter:()=>i,JetSearch:()=>o,JetSelect:()=>x,JetSlider:()=>l,JetSort:()=>r,JetStage:()=>p,JetStep:()=>A,JetTabs:()=>O,JetTag:()=>h,JetTransition:()=>S,JetWindow:()=>c});class s{constructor(t){this.config=this.mergeOptions(t),this.dynamicAttributes=["checked","selected","value"],this.init()}mergeOptions(t){return{container:"",content:"",replaceScript:!1,onRender:()=>{},...t}}init(){this.removeAllEvents(),this.render()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}removeAllEvents(){const t=document.querySelector("body"),e=t.cloneNode(!0);e.innerHTML=e.innerHTML.replace(/(&nbsp;|&ensp;|&emsp;|&#160;|\s)+/g," "),t.replaceWith(e),window.onresize=null}render(){const t=this.stringToHTML(this.config.content),e=this.getElement(this.config.container);this.diffAttributes(t,e),this.diff(t,e),this.config.onRender()}stringToHTML(t){if("string"==typeof t){t=t.replace(/^\s+|\s+$/gm,"").replace(/(?<=>)\n(?=<)/g,"").replace(/\n/g," ");const e=(new DOMParser).parseFromString(t,"text/html");return this.getElement(this.config.container,e)}return t}diff(t,e){const s=this.cleanNode(e.childNodes),i=t.childNodes;i.forEach(((t,i)=>{if(!s[i])return this.addDefaultAttributes(t),void e.append(t.cloneNode(!0));if(this.isDifferentNode(t,s[i]))return void s[i].parentNode.replaceChild(t.cloneNode(!0),s[i]);this.diffAttributes(t,s[i]);const n=this.getNodeContent(t);if(n&&n!==this.getNodeContent(s[i])&&(s[i].textContent=n),s[i].childNodes.length>0&&t.childNodes.length<1)s[i].innerHTML="";else{if(s[i].childNodes.length<1&&t.childNodes.length>0){const e=new DocumentFragment;return this.diff(t,e),void s[i].append(e)}if(t.childNodes.length>0&&this.diff(t,s[i]),this.config.replaceScript&&"SCRIPT"===s[i].nodeName||"SCRIPT"===s[i].nodeName&&s[i].hasAttribute("data-jetrender-script")){const e=document.createRange().createContextualFragment(t.outerHTML);s[i].parentNode&&s[i].parentNode.replaceChild(e,s[i])}else;}})),this.trimExtraNodes(s,i)}diffAttributes(t,e){const s=this.getAttributes(t,!0),i=this.getAttributes(e),n=i.filter((t=>{if(this.dynamicAttributes.indexOf(t.name)>-1)return!1;return null===this.find(s,(e=>t.name===e.name))})),a=s.filter((t=>{if(this.dynamicAttributes.indexOf(t.name)>-1)return!1;const e=this.find(i,(e=>t.name===e.name));return null===e||e.value!==t.value}));this.addAttributes(e,a),this.removeAttributes(e,n)}addDefaultAttributes(t){1===t.nodeType&&([...t.attributes].forEach((e=>{const s=e.name,i=e.value;s.length<8||!s.startsWith("default")||(this.addAttributes(t,[this.getAttribute(s.slice(7).toLowerCase(),i)]),this.removeAttributes(t,[this.getAttribute(s,i)]))})),t.childNodes&&[...t.childNodes].forEach((t=>{this.addDefaultAttributes(t)})))}addAttributes(t,e){e.forEach((e=>{if("class"===e.name)t.classList.value=e.value;else if("style"===e.name)this.diffStyles(t,e.value);else{if(e.name in t)try{t[e.name]=e.value,t[e.name]||0===t[e.name]||(t[e.name]=!0)}catch{}try{t.setAttribute(e.name,e.value)}catch{}}}))}removeAttributes(t,e){e.forEach((e=>{if("class"===e.name)t.classList.value="";else if("style"===e.name)this.removeStyles(t,[...t.style]);else{if(e.name in t)try{t[e.name]=""}catch{}try{t.removeAttribute(e.name)}catch{}}}))}getAttribute(t,e){return{name:t,value:e}}getDynamicAttributes(t,e,s){const i=s&&"option"===t.tagName.toLowerCase(),n=s&&"select"===t.tagName.toLowerCase();this.dynamicAttributes.forEach((s=>{const a=t[s];(a||0===a||i&&"selected"===s||n&&"value"===s)&&e.push(this.getAttribute(s,a))}))}getBaseAttributes(t,e){const s=t=>!this.dynamicAttributes.includes(t)||e&&"selected"===t;return[...t.attributes].filter((({name:t})=>s(t)&&(t=>t.length<=7||!t.startsWith("default"))(t))).map((({name:t,value:e})=>this.getAttribute(t,e)))}getAttributes(t,e){if(1!==t.nodeType)return[];const s=this.getBaseAttributes(t,e);return this.getDynamicAttributes(t,s,e),s}cleanNode(t){return[...t].filter((t=>!(3===t.nodeType&&!/\S/.test(t.nodeValue))))}find(t,e){const s=t.filter(e);return s.length<1?null:s[0]}getStyleMap(t){return t.split(";").reduce(((t,e)=>{const s=e.indexOf(":");return s&&t.push({name:e.slice(0,s).trim(),value:e.slice(s+1).trim()}),t}),[])}removeStyles(t,e){e.forEach((e=>{t.style[e]=""}))}changeStyles(t,e){e.forEach((e=>{t.style[e.name]=e.value}))}diffStyles(t,e){const s=this.getStyleMap(e),i=[...t.style].filter((e=>null===this.find(s,(s=>s.name===e&&s.value===t.style[e]))));this.removeStyles(t,i),this.changeStyles(t,s)}getNodeType(t){switch(t.nodeType){case Node.TEXT_NODE:return"text";case Node.COMMENT_NODE:return"comment";default:return t.tagName.toLowerCase()}}getNodeContent(t){return t.childNodes&&t.childNodes.length>0?null:t.textContent}isDifferentNode(t,e){const s=this.getNodeType(t)!==this.getNodeType(e),i=t.id!==e.id,n=t.src!==e.src;return s||i||n}trimExtraNodes(t,e){const s=t.length-e.length;s>0&&t.slice(-s).forEach((t=>t.remove()))}}class i{constructor(){const{pathname:t,search:e,hash:s}=location;this.from=`${t}${e}${s}`,this.routes={},this.init()}init(){this.getLinks(),this.pop()}getLinks(){const t=document.querySelectorAll("a[href]");this.setLinks(t)}setLinks(t){t.forEach((t=>{const e=t.getAttribute("href"),s=!t.hasAttribute("data-jetrouter-disabled"),i=!e.includes("http"),n=!t.hasAttribute("download"),a=!e.includes(":"),o=!t.target,r="#"!==e[0];s&&i&&n&&a&&o&&r&&t.addEventListener("click",this.linkHandler.bind(this))}))}linkHandler(t){t.preventDefault(),t.stopImmediatePropagation();const e=t.currentTarget.getAttribute("href");if(t.ctrlKey||t.shiftKey||t.metaKey)return window.open(e);this.navigate(e)}pop(){window.addEventListener("popstate",this.popHandler.bind(this))}popHandler(){const{pathname:t,search:e,hash:s}=location,i=`${t}${e}${s}`;this.navigate(i,!0)}navigate(t,e=!1){const s=this.matchRoute(t),i={from:this.from,to:t,parameters:s.parameters,queries:s.queries,popstate:e};return this.from=t,s.callback&&s.callback(i),this}matchRoute(t){const e=new URL(t,location.href),s=this.cleanUrl(e.pathname).split("/"),i=this.findRoute(s,0,this.routes,[])||{};return this.processQuery(e,i)}cleanUrl(t){return t.replace(/^\/|\/$/g,"")}findRoute(t,e,s,i){if(!s)return;if(e>=t.length)return i[0]&&(s.parameters=this.getParameters(i)),s;const n=decodeURIComponent(t[e]),a=this.findRoute(t,e+1,s[n.toLowerCase()],i),o=this.recurseNamedUrl(t,e+1,s[":"],n,i),r=t.slice(e).join("/"),l=this.recurseNamedUrl(t,t.length,s["*"],r,i);return a||o||l}getParameters(t){return t.reduce(((t,[e,s])=>(t[e]=s,t)),{})}recurseNamedUrl(t,e,s,i,n){return s&&n.push([s.name,i]),this.findRoute(t,e,s,n)}processQuery(t,e){if(t.search){const s=[...t.searchParams.entries()];e.queries=this.getParameters(s)}return e}get(t,e){const s=t.split("/");let i="/"===t[0]?1:0,n=this.routes;for(;i<s.length;++i){const t=s[i];let e=t.toLowerCase();":"!==t[0]&&"*"!==t[0]||(e=t[0]),n[e]||(n[e]={}),n=n[e],":"!==e&&"*"!==e||(n.name=t.slice(1)||i)}return n.callback=e,this}}class n extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.forms=this.getElements(this.config.form),this.checkButtons=this.getElements(this.config.favorite),this.deleteAllButtons=this.getElements(this.config.deleteAll),this.logoutButtons=this.getElements(this.config.logout),this.counters=this.getElements(this.config.counter),this.baseLoginApi=`${this.config.loginApi}account/`,this.loginApi=`${this.baseLoginApi}external/login/portal`,this.logoutApi=`${this.baseLoginApi}logoff`,this.baseFavoriteApi=`${this.config.favoriteApi}imoveisfavoritos`,this.searchApi=`${this.baseFavoriteApi}/pesquisar?filtro.${this.config.idType}id=${this.config.id}&pagina=1&maximo=999999`,this.deleteAllApi=`${this.baseFavoriteApi}/excluirtodos/${this.config.id}`,this.total=0,this.init()}mergeOptions(t){return{favorite:"",form:"",deleteAll:"",counter:"",logout:"",loginApi:"https://casasoftautorizacao.azurewebsites.net/api/v1/",favoriteApi:"https://apiimoveisv3.casasoftsig.com/api/v3/",key:"1add169cbb1244d1aaadad282dc16425",idType:"cliente",id:"",onLogin:t=>{},onUnlogged:()=>{},onLogout:()=>{},onClick:t=>{},onChange:t=>{},onAdd:()=>{},onDelete:()=>{},onDeleteAll:()=>{},onError:(t,e)=>{},...t}}init(){this.loginSubmit(),this.get(),this.favoriteButton(),this.deleteAllButton(),this.logoutButton()}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}loginSubmit(){this.forms.forEach((t=>{t.onsubmit=this.loginHandler.bind(this,t)}))}loginHandler(t){event.preventDefault();const e=new FormData(t),s=this.loginApi;e.append("keySecret",this.config.key),e.append(`${this.config.idType}Id`,this.config.id),e.append("moduloId",1);const i={method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(Object.fromEntries(e))};this.loader(s,i,"login",!1,t),t.reset()}async loader(t,e,s,i,n){if(!this.token&&"login"!==s&&"get"!==s)return this.createCustomEvent("onUnlogged"),this.config.onUnlogged();const a=await fetch(t,e),o=`Error on ${s} favorites`;a.ok||(this.createCustomEvent("onError",{error:o,action:s}),this.config.onError(o,s));const r=await a.json();this[`${s}Success`](r,i,n)}loginSuccess(t,e,s){document.cookie=`favoritesToken=${t.data.accessToken}; path=/;`,document.cookie=`favoritesUser=${t.data.userToken.email}; path=/;`,this.get(),this.createCustomEvent("onLogin",{form:s}),this.config.onLogin(s)}get(t){this.getStorage();const e=`${this.searchApi}&filtro.email=${this.user}`,s={headers:{authorization:`bearer ${this.token}`}};this.token&&this.loader(e,s,"get",t)}getStorage(){const t=(document.cookie||"").match("favoritesToken=([^;]*)")?.[1],e=(document.cookie||"").match("favoritesUser=([^;]*)")?.[1];t&&(this.token=t,this.user=e)}getSuccess(t,e){this.total=t.data.total;const s=[],i=[];for(const e of t.data.resultado)s.push(`${e.clienteId},${e.imovelId},${e.imovelTipoDivulgacao}`),i.push(e.imovelFavoritoId);this.checkButton(s,i),this.counter(this.total),this.action(),e&&(this.createCustomEvent("onChange",{total:this.total}),this.config.onChange(this.total))}checkButton(t,e){this.checkButtons.forEach((s=>{const i=s.dataset,{jetfavoriteClienteid:n,jetfavoriteImovelid:a,jetfavoriteImovelpara:o}=i,r=`${n},${a},${o}`,l=t.indexOf(r),h="is-active";l>-1?(i.jetfavoriteFavoritoid=e[l],s.classList.add(h)):i.jetfavoriteFavoritoid&&(delete i.jetfavoriteFavoritoid,s.classList.remove(h))}))}counter(t){this.counters&&this.counters.forEach((e=>{e.innerHTML=t}))}action(){if(!this.actionElement)return;const t=this.actionElement.dataset,e=t.jetfavoriteFavoritoid;this.actionElement=null,t.jetfavoriteImovelid?e?this.delete(e):e||this.add(t):this.deleteAll()}favoriteButton(){this.checkButtons.forEach((t=>{t.onclick=this.favoriteButtonHandler.bind(this)}))}favoriteButtonHandler(t){const e=t.currentTarget.dataset,s=e.jetfavoriteFavoritoid;s?this.delete(s):this.add(e),this.token?(this.createCustomEvent("onClick",{event:t}),this.config.onClick(t)):this.actionElement=t.currentTarget}add(t){const e=this.baseFavoriteApi,s={method:"post",headers:{authorization:`bearer ${this.token}`,"content-type":"application/json"},body:`{\n                "clienteId": "${t.jetfavoriteClienteid}",\n                "imovelId": ${t.jetfavoriteImovelid},\n                "imovelPara": "${t.jetfavoriteImovelpara}"\n            }`};this.loader(e,s,"add")}addSuccess(){this.get(!0),this.createCustomEvent("onAdd"),this.config.onAdd()}delete(t){const e=`${this.baseFavoriteApi}/${t}`,s={method:"delete",headers:{authorization:`bearer ${this.token}`}};this.loader(e,s,"delete")}deleteSuccess(){this.get(!0),this.createCustomEvent("onDelete"),this.config.onDelete()}deleteAllButton(){this.deleteAllButtons.forEach((t=>{t.onclick=this.deleteAllButtonHandler.bind(this,t)}))}deleteAllButtonHandler(t){this.token?this.deleteAll():this.actionElement=t}deleteAll(){const t=this.deleteAllApi,e={method:"delete",headers:{authorization:`bearer ${this.token}`}};this.loader(t,e,"deleteAll")}deleteAllSuccess(){this.get(!0),this.createCustomEvent("onDeleteAll"),this.config.onDeleteAll()}logoutButton(){this.logoutButtons.forEach((t=>{t.onclick=this.logoutbuttonHandler.bind(this)}))}logoutbuttonHandler(){this.user="",this.token="",document.cookie="favoritesToken=; max-age=0; path=/",document.cookie="favoritesUser=; max-age=0; path=/",this.counter(0),this.createCustomEvent("onLogout"),this.config.onLogout()}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class a extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.container=this.getElement(this.config.container),this.baseClass=this.getBaseClass(this.container),this.filteredElements=[],this.filteredIndexes=[]}mergeOptions(t){return{container:"",element:"",mode:"free",highlight:!1,exception:[],notFound:"",onFilter:(t,e)=>{},onReset:()=>{},onNotFound:()=>{},...t}}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getBaseClass(t){"string"!=typeof t&&(t=t.classList[0]||t.id);const e=t.replace(/[^a-zA-Z0-9-_]/g,""),s=e.includes("__")?"-":"__";return`${e}${s}`}filter(t=""){const e=t.split(",").pop().trim();this.filterElements(e),this.createCustomEvent("onFilter",{element:this.filteredElements,index:this.filteredIndexes}),this.config.onFilter(this.filteredElements,this.filteredIndexes)}filterElements(t=""){const e=this.container.querySelectorAll(this.config.element),s=[...e].map((t=>t.innerText));this.filteredElements=this.getFiltered(s,t),this.filteredIndexes=this.filteredElements.map((t=>s.indexOf(t))),this.manageNotFound(t,this.filteredElements),e.forEach(((e,s)=>{const i=!this.filteredIndexes.includes(s),n=e.parentElement,a=e.nodeName;if(this.config.highlight&&this.highlight(e,t),this.setVisibility(e,i),n!==this.container){const t=!n.querySelector(`${a}:not([hidden])`);this.setVisibility(n,t)}}))}getFiltered(t,e){return t.filter((t=>{t=t.toLowerCase(),e=e.toLowerCase();const s=0===t.indexOf(e),i=t.includes(e),n="free"===this.config.mode?i:s,a=this.config.exception.includes(t);return n||a}))}manageNotFound(t,e){if(!this.config.notFound)return;const s=this.container.querySelector(`.${this.baseClass}not-found`);s&&s.remove(),e[0]||(this.container.prepend(this.createNotFound(t)),this.createCustomEvent("onNotFound"),this.config.onNotFound())}createNotFound(t){const e=document.createElement("div"),s=this.config.notFound.replace("{term}",t);return e.className=`${this.baseClass}not-found`,e.innerHTML=s,e}highlight(t,e){const s=(t=t.querySelector(this.config.highlightElement)||t).innerText;if(s.includes(e)){const i=new RegExp(e||"<.*?>","gi"),n=e?`<mark class="${this.baseClass}highlight">$&</mark>`:"",a=s.replace(i,n);t.innerHTML=a}}setVisibility(t,e){t.classList.toggle("is-hidden",e),t.hidden=e}reset(){this.filterElements(),this.createCustomEvent("onReset"),this.config.onReset()}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class o extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.button=this.getElements(this.config.button),this.parameters="",this.query={},this.url=this.config.baseUrl,this.init()}mergeOptions(t){return{...{button:"",data:{},parameters:[],query:[],baseUrl:location.pathname,concatenateWith:"-",formatValue:t=>t,formatTemplate:(t,e)=>t,onClick:(t,e)=>{},onChange:t=>{}},...t}}init(){this.createUrl(),this.setSearchButton()}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}createUrl(){this.config.parameters.forEach(((t,e)=>{this.config.data[t.value]&&(this.parameters+=`${this.config.concatenateWith}${this.encodeParameter(e,this.config.data[t.value])}`)})),this.config.query.forEach(((t,e)=>{this.config.data[t.value]&&this.addQuery(e,this.config.data[t.value])})),this.parameters=this.parameters[0]===this.config.concatenateWith?this.parameters.substring(1):this.parameters,this.url+=`${this.parameters}${this.getQuery()}`}updateUrl(t){this.parameters="",this.query={},this.url=this.config.baseUrl,this.config.data=t,this.createUrl(),this.createCustomEvent("onChange",{url:this.url}),this.config.onChange(this.url)}encodeParameter(t,e){const s=this.getParameterTemplate(t),i=this.formatValue(t,e),n=this.getParameterSearch(t,s),a=s.replace(n,i);return this.formatTemplate(t,a,i)}getParameterTemplate(t){const e=this.config.parameters[t];return e.template||e.value}formatValue(t,e){const s=this.config.formatValue,i=this.config.parameters[t].formatValue;return s&&(e=s(e)),i&&(e=i(e)),e}getParameterSearch(t,e){const s=`{${this.config.parameters[t].value}}`;return e.includes(s)?s:this.config.parameters[t].value}formatTemplate(t,e,s){const i=this.config.formatTemplate,n=this.config.parameters[t].formatTemplate;return i&&(e=i(e,s)),n&&(e=n(e,s)),e}addQuery(t,e){const s=this.getQueryName(t),i=this.formatValue(t,e,"query");this.query[s]=i}getQueryName(t){return this.config.query[t].name}getQuery(){if(Object.entries(this.query).length>0){return`?${new URLSearchParams(this.query).toString()}`}return""}setSearchButton(){this.button&&this.button.forEach((t=>{if("A"===t.tagName)return t.href=this.url;t.onclick=this.searchButtonHandler.bind(this)}))}searchButtonHandler(t){this.createCustomEvent("onClick",{event:t,url:this.url}),this.config.onClick(t,this.url)}getUrl(){return this.url}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class r{static sortJsonByKey(t,e,s){const i=this.getJsonValuesByKey(t,e);return s=(s=[...new Set(s?[...s,...i]:i)]).reduce(((t,e,s)=>(t[e]=s+1,t)),{}),[...t].sort(((t,i)=>(s[t[e]]||1/0)-(s[i[e]]||1/0)))}static getJsonValuesByKey(t,e){return t.map((t=>t[e]))}static sortJsonOrder(t,e,s){const i=this.getJsonValuesByKey(t,e);return s&&(t=this.sorter(t,i,e),"desc"===s&&t.reverse()),t}static sorter(t,e,s){return t.sort(((t,i)=>this.isDateArray(e)?new Date(t[s])-new Date(i[s]):this.isNumberArray(e)?t[s]-i[s]:t[s].localeCompare(i[s])))}static isDateArray(t){return t.every((t=>!isNaN(Date.parse(t))))}static isNumberArray(t){return!t.some(isNaN)}}class l extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.element=this.getElement(this.config.element),this.container=this.element.querySelector(`:scope > ${this.config.container}`),this.slides=this.container.querySelectorAll(`:scope > ${this.config.slide}`),this.previousButton=this.getElement(this.config.previous),this.nextButton=this.getElement(this.config.next),this.pagination=this.getElement(this.config.pagination),this.classes=this.config.classes,this.baseId=this.getBaseId(),this.aria=this.config.aria,this.active=this.config.startIndex,this.axis=this.getAxis(),this.dragTracker={},this.containerPosition=0,this.scrollOffset=0,this.isHovering=!1,this.interval=1e3/60,this.previousTime=performance.now(),this.elapsedTime=0,this.init()}mergeOptions(t){const e={element:"",container:"[data-jetslider-container]",slide:"[data-jetslider-slide]",previous:"",next:"",pagination:"",classes:this.getClasses(t),aria:this.getAria(),mode:"gallery",direction:"horizontal",speed:.1,grid:[],center:!1,autoHeight:!1,slidesToShow:1,slidesToScroll:1,startIndex:0,gap:0,drag:!0,keyboard:!1,mousewheel:!1,rewind:!1,loop:!1,autoplay:!1,autoplayDelay:5e3,pauseOnHover:!0,breakpoints:{},onChange:t=>{},onClick:t=>{},onKeyDown:t=>{},onRender:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.setSlider(),this.setContainer(),this.setPreviousButton(),this.setNextButton(),this.createGrid(),this.setMainProperties(),this.setThumbsMode(),this.createPagination(),this.intersectionObserver(),this.resizeObserver(),this.events(),this.updatePagination(this.active),this.setActiveSlide(this.active),this.setSelectedSlide(this.active),this.startAutoplay()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{grid:`${i}grid`,"pagination-item":`${i}pagination-item`,"pagination-button":`${i}pagination-button`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getBaseId(){const t=[...document.querySelectorAll("[data-jetslider]")].findIndex((t=>t===this.element));return this.element.id||`slider-${t}`}getAria(){return{element:{"aria-roledescription":"carousel"},slide:{"aria-roledescription":"slide","aria-label":"{current} de {total}"},previous:{"aria-label":"Slide anterior"},next:{"aria-label":"Próximo slide"},pagination:{"aria-label":"Selecione um slide"},"pagination-button":{"aria-label":"Ir para o slide {index}"}}}getSlidesSize(t){return[...t].map((t=>parseFloat(window.getComputedStyle(t)[this.getSizeType()])))}getSlidesToShow(){let t=this.config.slidesToShow;return/px/g.test(t)&&(t=parseFloat(t),t=Math.floor(this.sliderSize/t)),this.config.slidesToShow?Math.max(1,t):t}getSlidesToScroll(){let t=this.config.slidesToScroll;return/px/g.test(t)&&(t=parseFloat(t),t=Math.floor(this.sliderSize/t)),Math.max(1,t)}sumArray(t){return t.reduce(((t,e)=>t+e),0)}getAxis(){return"vertical"===this.config.direction?"Y":"X"}getSizeType(){return"vertical"===this.config.direction?"height":"width"}setSlider(){const t=this.element.getAttribute("role")||"region",e=this.element.getAttribute("aria-roledescription")||this.aria.element["aria-roledescription"];this.element.dataset.jetslider=this.config.drag?"draggable":"",this.element.id=this.baseId,this.element.setAttribute("role",t),this.element.setAttribute("aria-roledescription",e)}setContainer(){const t=this.element.getAttribute("aria-live")||"polite",e=this.element.getAttribute("aria-atomic")||"true",s="vertical"===this.config.direction?"Top":"Left";this.container.dataset.jetsliderContainer=this.config.direction,this.container.setAttribute("role","presentation"),this.container.setAttribute("aria-live",t),this.container.setAttribute("aria-atomic",e),this.container.style[`margin${s}`]=`-${this.config.gap}px`,"vertical"===this.config.direction&&(this.container.style.height=`calc(100% + ${this.config.gap}px)`)}createGrid(){if(!this.config.grid[0])return;const t=new DocumentFragment,e=this.getGridMatrix(),s=[];let i=0;e.forEach(((n,a)=>{const o=e.length,r=this.createGridSlide(n,a,o);for(let t=0;t<n.total;t++)this.slides[i]&&(r.append(this.slides[i]),i++);s.push(r),t.append(r)})),this.slides=s,this.container.innerHTML="",this.container.append(t)}getGridMatrix(){const t=this.config.grid,e=t.reduce(((t,e)=>t+e.total),0),s=t.some((t=>t.repeat))?t.filter((t=>t.repeat)):[...t],i=this.slides.length-e;let n=t.length,a=0;for(;a<i&&(a+=s[n%s.length].total,t.push({...s[n%s.length]}),n++,!(a>i)););return t}createGridSlide(t,e,s){const i=document.createElement("li");return i.className=this.classes.grid,i.dataset.jetsliderGrid="",i.id=`${this.classes.grid}-${e+1}`,i.setAttribute("role","tabpanel"),i.setAttribute("aria-roledescription","slide"),i.setAttribute("aria-label",`${e+1} de ${s}`),Object.entries(t).forEach((([t,e])=>{i.style[t]=e})),i}setSlide(){const t=this.slidesToShow?`${(100/this.slidesToShow).toFixed(4)}%`:"",e="vertical"===this.config.direction?"Top":"Left";this.slides.forEach(((s,i)=>{s.id=`slide-${i+1}`,s.setAttribute("role","tabpanel"),s.setAttribute("aria-roledescription",this.aria.slide["aria-roledescription"]);const n=this.aria.slide["aria-label"].replace("{current}",i+1).replace("{total}",this.slides.length);s.setAttribute("aria-label",n),s.style["vertical"===this.config.direction?"height":"width"]=t,s.style[`padding${e}`]=`${this.config.gap}px`}))}intersectionObserver(){const t={root:this.element,threshold:.1},e=new IntersectionObserver(this.inView.bind(this),t);this.slides.forEach((t=>e.observe(t)))}inView(t){t.forEach((t=>this.setVisibleSlides(t))),this.autoHeight()}setVisibleSlides(t){t.target.classList.toggle("is-visible",t.isIntersecting),t.target.setAttribute("aria-hidden",!t.isIntersecting),t.target.tabIndex=t.isIntersecting?0:-1}autoHeight(){if(!this.config.autoHeight)return;const t=[...this.container.querySelectorAll(".is-visible")].map((t=>t.clientHeight)),e=Math.max(...t);this.container.style.alignItems="start",this.container.style.height=`${e}px`}setThumbsMode(){if("thumbs"!==this.config.mode)return;this.container.querySelectorAll("[data-jetslider-slide]").forEach(((t,e)=>{t.onclick=this.clickHandler.bind(this,e)}))}clickHandler(t){this.dragTracker.current||(this.setSelectedSlide(t),this.createCustomEvent("onClick",{current:t}),this.config.onClick(t))}setSelectedSlide(t){if("thumbs"!==this.config.mode)return;const e=this.container.querySelector(".is-selected");e&&e.classList.remove("is-selected"),this.slides[t].classList.add("is-selected")}events(){this.addDragEvents(),this.addKeyboardEvent(),this.addMouseEvents(),this.addMousewheelEvent()}addDragEvents(){this.config.drag&&(this.element.addEventListener("pointerdown",this.downHandler.bind(this),{passive:!0}),this.element.addEventListener("dragstart",(t=>t.preventDefault())),window.addEventListener("pointermove",this.moveHandler.bind(this),{passive:!0}),window.addEventListener("pointerup",this.upHandler.bind(this)),window.addEventListener("contextmenu",this.upHandler.bind(this)))}addKeyboardEvent(){if(!this.config.keyboard)return;("global"===this.config.keyboard?window:this.element).addEventListener("keydown",this.keydownHandler.bind(this))}addMouseEvents(){this.config.autoplay&&!this.config.pauseOnHover||(this.element.addEventListener("pointerover",this.overHandler.bind(this)),this.element.addEventListener("pointerout",this.outHandler.bind(this)))}addMousewheelEvent(){this.config.mousewheel&&(this.element.addEventListener("wheel",this.mousewheelHandler.bind(this),{passive:!0}),window.addEventListener("wheel",(t=>{this.isHovering&&t.preventDefault()}),{passive:!1}))}setPreviousButton(){if(!this.previousButton)return;const t=this.previousButton.getAttribute("aria-label")||this.aria.previous["aria-label"];this.previousButton.setAttribute("aria-label",t),this.previousButton.setAttribute("aria-controls",this.element.id),this.previousButton.onclick=this.previous.bind(this)}previous(){let t=Math.floor((this.active-1)/this.slidesToScroll)*this.slidesToScroll;t<0&&this.dragTracker.start&&this.dragTracker.end&&(t=this.slides.length+t),this.goTo(t)}setNextButton(){if(!this.nextButton)return;const t=this.nextButton.getAttribute("aria-label")||this.aria.next["aria-label"];this.nextButton.setAttribute("aria-label",t),this.nextButton.setAttribute("aria-controls",this.element.id),this.nextButton.onclick=this.next.bind(this)}next(){const t=Math.ceil((this.active+1)/this.slidesToScroll)*this.slidesToScroll;this.goTo(t)}resizeObserver(){const t=new ResizeObserver((t=>{requestAnimationFrame((()=>{t.forEach((t=>{this.setMainProperties(),this.setInitialPosition(),this.createPagination(),this.updatePagination(this.active),this.enableButtons(),this.createLoop()}))}))}));t.observe(this.container),this.slides.forEach((e=>t.observe(e)))}enableButtons(){if(this.previousButton){const t=!this.isSlidable()||!this.config.loop&&!this.config.rewind&&this.scrollOffset<=0;this.previousButton.disabled=t}if(this.nextButton){const t=!this.isSlidable()||!this.config.loop&&!this.config.rewind&&this.scrollOffset>=this.getMaxScrollLimit();this.nextButton.disabled=t}}isSlidable(){return this.wrapSize>this.sliderSize}goTo(t){if(t!==this.active&&this.isSlidable()){const e=this.getPage(t),s=this.getPagesRange()[e],i=this.getPagesRange().pop();let n,a=t>this.active?"next":"previous";this.config.loop||this.config.rewind?"next"===a?this.active>=i?(n=this.config.loop?this.slides.length-this.active:this.slides.length,a=this.config.rewind?"previous":"next"):n=s-this.active:0===this.active?(n=this.config.loop?this.slides.length-i:i,a=this.config.rewind?"next":"previous"):n=this.active-s:n="next"===a?s-this.active:this.active-s,this.requestAnimationFrame(),this.scrollToOffset(n,a),a=t>this.active?"next":"previous",this.config.loop||this.config.rewind?this.active="next"===a?this.active>=i?0:this.active+n:this.active<=0?i:this.active-n:this.active="next"===a?this.active+n:this.active-n}this.updatePagination(this.active),this.setActiveSlide(this.active),this.setSelectedSlide(t),this.restartAutoplay(),this.enableButtons(),this.createCustomEvent("onChange",{current:this.active}),this.config.onChange(this.active)}scrollToOffset(t,e){const s=this.getScrollOffset(0,this.active,"next"),i=this.getScrollOffset(this.active,t,e),n=(this.scrollOffset===this.wrapSize?0:this.scrollOffset)-s,a=this.scrollOffset-n,o=this.config.loop?a-i:this.clamp(a-i,0,this.getMaxScrollLimit()),r=this.config.loop?a+i:this.clamp(a+i,0,this.getMaxScrollLimit());this.scrollOffset="next"===e?r:o}getScrollOffset(t,e,s){const i=[];let n;for(let a=e;a>0;a--)n="next"===s?t++%this.slides.length:(this.slides.length+t-a)%this.slides.length,i.push(this.slidesSize[n]);return this.sumArray(i)}setActiveSlide(t){const e=this.container.querySelector(".is-active");e&&e.classList.remove("is-active"),this.slides[t].classList.add("is-active")}createPagination(){if(!this.config.pagination)return;const t=this.pagination.getAttribute("role")||"tablist",e=this.pagination.getAttribute("aria-label")||this.aria.pagination["aria-label"],s=Math.ceil(this.slides.length/this.slidesToScroll),i=new DocumentFragment;this.pagination.setAttribute("role",t),this.pagination.setAttribute("aria-label",e),this.pagination.innerHTML="",this.pagination.classList.toggle("is-disabled",!this.isSlidable());for(let t=0;t<s;t++)i.append(this.createPaginationButton(t));this.pagination.append(i)}createPaginationButton(t){const e=document.createElement("li"),s=document.createElement("button"),i=this.getPagesRange()[t],n=this.slidesToScroll,a=this.aria["pagination-button"]["aria-label"].replace("{index}",t*n+1),o=Array.from({length:n},((e,s)=>`${this.baseId}-slide-${t*n+s+1}`)).join(" ");return e.className=this.classes["pagination-item"],e.dataset.jetsliderPaginationItem="",e.setAttribute("role","presentation"),s.className=this.classes["pagination-button"],s.dataset.jetsliderPaginationButton="",s.type="button",s.disabled=!this.isSlidable(),s.setAttribute("role","tab"),s.setAttribute("aria-label",a),s.setAttribute("aria-controls",o),s.addEventListener("click",this.goTo.bind(this,i)),e.append(s),e}updatePagination(t){if(!this.config.pagination)return;const e=this.pagination.querySelectorAll("button"),s=this.getPage(t);e.forEach(((t,e)=>{t.classList.toggle("is-active",s===e),t.setAttribute("aria-selected",s===e)}))}getPage(t){const e=this.getPagesRange(),s=e.filter((e=>t>=e));return e.indexOf(s.pop())}getPagesRange(){const t=[];for(let e=0;e<this.slides.length;e+=this.slidesToScroll)t.push(e);return t}downHandler(t){this.isSlidable()&&!this.isIgnoredNode(t.target.nodeName)&&(t=t.touches?t.touches[0]:t,this.dragTracker={isDragging:!0,time:Date.now(),direction:"",start:t[`client${this.axis}`],move:t[`client${this.axis}`],current:0,offset:0,end:0},this.element.classList.add("is-dragging"))}isIgnoredNode(t){return["INPUT","SELECT","TEXTAREA"].includes(t)}moveHandler(t){this.dragTracker.isDragging&&(t=t.touches?t.touches[0]:t,this.dragTracker.current=t[`client${this.axis}`],this.dragTracker.offset=this.dragTracker.move-this.dragTracker.current,this.scrollOffset=this.scrollOffset+this.dragTracker.offset,this.dragTracker.move=this.dragTracker.current,this.requestAnimationFrame())}upHandler(t){if(!this.dragTracker.isDragging)return;t=t.touches?t.touches[0]:t;this.dragTracker.isDragging=!1,this.dragTracker.end=t[`client${this.axis}`],this.dragTracker.direction=this.dragTracker.start-this.dragTracker.end>0?"next":"previous",this.scrollOffset+=25*this.dragTracker.offset,this.element.classList.remove("is-dragging"),this.requestAnimationFrame(),this.dragHandler(),this.dragTracker.start=0,this.dragTracker.end=0}dragHandler(){this.dragTracker.start-this.dragTracker.end!=0&&("free"===this.config.drag?this.dragFree():"free-snap"===this.config.drag?this.dragFreeSnap():this.dragNormal(),this.updatePagination(this.active),this.setActiveSlide(this.active),this.restartAutoplay(),this.enableButtons(),this.createCustomEvent("onChange",{current:this.active}),this.config.onChange(this.active))}dragNormal(){"next"===this.dragTracker.direction?this.next():this.previous()}dragFree(){this.active=this.findIndexByOffset(this.active,this.scrollOffset,this.slidesSize)}dragFreeSnap(){this.scrollOffset=this.findClosestOffset(this.active,this.scrollOffset,this.slidesSize),this.active=this.findIndexByOffset(this.active,this.scrollOffset,this.slidesSize)}findClosestOffset(t,e,s){let i=this.sumArray(s.slice(0,t)),n=t;if(i<e)for(let a=t;n=a%s.length,!(i+s[n]/2>e);a++)i+=s[n];else for(;!(i-s[t=(t-1+s.length)%s.length]/2<e);)i-=s[t],n=t;return i}findIndexByOffset(t,e,s){let i=this.sumArray(s.slice(0,t)),n=t;if(i<e)for(let a=t;(this.config.loop||!(a>=s.length))&&(n=a%s.length,!(i+s[n]/2>e));a++)i+=s[n];else for(;(this.config.loop||!(t<=0))&&!(i-s[t=(t-1+s.length)%s.length]/2<e);)i-=s[t],n=t;return n}isOutScrollLimit(){const t=this.getMaxScrollLimit();return this.scrollOffset<0||this.scrollOffset>t}getMaxScrollLimit(){return this.config.center?this.maxScroll+this.sliderSize-this.slidesSize[this.slides.length-1]:this.maxScroll-this.config.gap}overHandler(){this.isHovering=!0,this.stopAutoplay()}outHandler(){this.isHovering=!1,this.restartAutoplay()}restartAutoplay(){this.config.autoplay&&this.config.pauseOnHover&&(this.stopAutoplay(),this.startAutoplay())}stopAutoplay(){clearInterval(this.autoplay)}startAutoplay(){this.config.autoplay&&(this.autoplay=setInterval((()=>{const t=this.active+this.slidesToScroll>=this.slides.length,e=!this.config.loop&&!this.config.rewind&&t;this.isVisibleOnViewport(this.element)&&(e?this.stopAutoplay():this.next())}),this.config.autoplayDelay))}isVisibleOnViewport(t){const{top:e,left:s,bottom:i,right:n}=t.getBoundingClientRect(),a=e<window.innerHeight&&i>0,o=s<window.innerWidth&&n>0;return a&&o}keydownHandler(t){switch(t.key){case"ArrowUp":case"ArrowLeft":this.previous();break;case"ArrowDown":case"ArrowRight":this.next()}this.createCustomEvent("onKeydown",{event:t}),this.config.onKeyDown(t)}mousewheelHandler(t){if(this.isHovering)if(this.requestAnimationFrame(),"free"===this.config.drag)this.scrollOffset+=t.deltaY,this.dragFree(),this.updatePagination(this.active),this.setActiveSlide(this.active),this.restartAutoplay(),this.enableButtons(),this.createCustomEvent("onChange",{current:this.active}),this.config.onChange(this.active);else if("free-snap"===this.config.drag){let e;this.scrollOffset+=t.deltaY,e&&clearTimeout(e),e=setTimeout((()=>{this.dragFreeSnap()}),1e3),this.updatePagination(this.active),this.setActiveSlide(this.active),this.restartAutoplay(),this.enableButtons(),this.createCustomEvent("onChange",{current:this.active}),this.config.onChange(this.active)}else t.deltaY<=-5?this.previous():t.deltaY>=5&&this.next()}setScrollLimit(){if(this.config.loop)return;const t=this.getMaxScrollLimit();this.dragTracker.isDragging&&this.isOutScrollLimit()?this.scrollOffset-=this.dragTracker.offset/1.5:this.scrollOffset=this.clamp(this.scrollOffset,0,t)}clamp(t,e,s){return Math.max(e,Math.min(t,s))}render(t){this.elapsedTime=t-this.previousTime;const e=this.config.center?(this.slidesSize[this.active]-this.sliderSize-this.config.gap)/2:0,s=this.containerPosition,i=this.scrollOffset+e;if(this.elapsedTime>this.interval){const e=this.getRenderValues(s),n=this.setSpeed();this.previousTime=t-this.elapsedTime%this.interval,this.containerPosition=this.lerp(this.containerPosition,i,n),this.container.style.transform=this.translate(-this.containerPosition),this.setScrollLimit(),this.createLoop(),this.createCustomEvent("onRender",{values:e}),this.config.onRender(e)}s.toFixed(2)!==i.toFixed(2)?this.requestAnimationFrame():cancelAnimationFrame(this.raf)}setSpeed(){return this.dragTracker.isDragging?1:this.config.speed}lerp(t,e,s){return t*(1-s)+e*s}createLoop(){this.config.loop&&this.isSlidable()&&(this.slidesLoop(),this.containerLoop())}slidesLoop(){const t=this.containerPosition-this.maxScroll;this.slides.forEach(((e,s)=>{const i=this.sumArray(this.slidesSize.slice(0,s)),n=t<i-this.wrapSize||t>i,a=t<i-this.wrapSize?-this.wrapSize:this.wrapSize;e.style.transform=n?this.translate(a):""}))}containerLoop(){const t=this.config.center?(this.slidesSize[0]-this.sliderSize-this.config.gap)/2:0,e=this.config.center?this.wrapSize+t:this.wrapSize;this.containerPosition<t?(this.containerPosition=e,this.scrollOffset=this.scrollOffset+this.wrapSize):this.containerPosition>=e&&(this.containerPosition=t,this.scrollOffset=this.scrollOffset-this.wrapSize)}translate(t){return`translate3d(${"X"===this.axis?t:0}px, ${"Y"===this.axis?t:0}px, 0px)`}requestAnimationFrame(){this.raf=requestAnimationFrame(this.render.bind(this))}getRenderValues(t){return{speed:Math.abs(Math.min(100,t-this.containerPosition)).toFixed(4),playrate:(this.containerPosition/this.maxScroll).toFixed(4)}}setMainProperties(){this.sliderSize=parseFloat(window.getComputedStyle(this.element)[this.getSizeType()]),this.slidesToShow=this.getSlidesToShow(),this.slidesToScroll=this.getSlidesToScroll(),this.autoHeight(),this.setSlide(),this.slidesSize=this.getSlidesSize(this.slides),this.wrapSize=this.sumArray(this.slidesSize),this.maxScroll=this.wrapSize-this.sliderSize}setInitialPosition(){const t=this.config.center?(this.slidesSize[this.active]-this.sliderSize-this.config.gap)/2:0;this.scrollOffset=this.getScrollOffset(0,this.active,"next"),this.containerPosition=this.scrollOffset+t,this.container.style.transform=this.translate(-this.containerPosition)}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e})}}class h extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.container=this.getElement(this.config.container),this.deleteAllButton=this.getElements(this.config.deleteAll),this.classes=this.config.classes,this.init()}mergeOptions(t){const e={container:"",deleteAll:"",classes:this.getClasses(t),data:{},tag:[],formatTemplate:(t,e)=>t,formatValue:t=>t,onChange:t=>{},onDelete:t=>{},onDeleteAll:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.container&&(this.filterTags(),this.setData(),this.setTags(),this.createTags(),this.setDeleteAllButton())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{tag:`${i}tag`,text:`${i}text`,delete:`${i}delete`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}filterTags(){this.config.tag=this.config.tag.filter((t=>Object.entries(this.config.data).some((([e,s])=>this.stringToArray(t.key).includes(e)&&s))))}setData(){this.config.data=this.config.tag.reduce(((t,e)=>(this.stringToArray(e.key).forEach((s=>{let i=this.config.data[s];!Array.isArray(i)&&e.multiple&&(i=i.split(",").map((t=>t.trim()))),t[s]=this.stringToArray(i)})),t)),{})}setTags(){this.tags=this.config.tag.flatMap((t=>{const e=this.stringToArray(t.key),s=this.getValues(e,t.formatValue);return this.getTemplate(t.template,t.formatTemplate,s,e).map(((i,n)=>{const a=s[n];return{keys:e,content:i,values:s,value:a,index:n,...t}}))}))}stringToArray(t){return Array.isArray(t)?t:[t]}getValues(t,e){const s=t.map((t=>this.config.data[t].map((t=>this.formatValue(t,e)))));return this.zipArrays(s)}formatValue(t,e){return this.config.formatValue&&(t=this.config.formatValue(t)),e&&(t=e(t)),t}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}getTemplate(t,e,s,i){return s.map((s=>{let n=t;return s.forEach(((t,e)=>{const s=`{${i[e]}}`;n=n.replace(s,t)})),this.formatTemplate(n,e,s)}))}formatTemplate(t,e,s){return this.config.formatTemplate&&(t=this.config.formatTemplate(t,s)),e&&(t=e(t,s)),t}createTags(){const t=document.createDocumentFragment();this.removeAllTags(!0),this.tags.forEach((e=>{const s=this.createTag(e);t.append(s)})),this.container.append(t)}removeAllTags(t=!1){const e=(t?"":"button")+"[data-jettag-tag]";this.container.querySelectorAll(e).forEach((t=>t.remove()))}createTag(t){const e=!1===t.delete?"div":"button",s=document.createElement(e),i=document.createElement("span");if(s.className=`${this.classes.tag}${t.class?" "+t.class:""}`,s.dataset.jettagTag="",s.type="button",i.className=this.classes.text,i.dataset.jettagText="",i.innerHTML=t.content,!1===t.delete)s.className+=" is-fixed";else{const t=this.createDelete();s.onclick=this.delete.bind(this),s.append(t)}return s.prepend(i),s}createDelete(){const t=document.createElement("div");return t.className=this.classes.delete,t.dataset.jettagDelete="",t.setAttribute("aria-hidden",!0),t}delete(t){const e=this.container.querySelectorAll("[data-jettag-tag]"),s=[].indexOf.call(e,t.currentTarget),i=this.tags[s],n=i.onDelete?i:this.config;let a,o=[];this.tags.forEach(((t,s)=>{i.keys.some((e=>t.keys.includes(e)))&&i.index===t.index&&(o.push(t.keys,i.keys),a=t.index,e[s].remove())})),o=[...new Set(o.flat())],o.forEach((t=>this.config.data[t].splice(a,1)));const r=this.getResult();this.setTags(),this.createCustomEvent("onDelete",{result:r}),n.onDelete(r),this.createCustomEvent("onChange",{result:r}),this.config.onChange(r)}setDeleteAllButton(){this.deleteAllButton&&this.deleteAllButton.forEach((t=>{t.onclick=this.deleteAll.bind(this)}))}deleteAll(){this.tags.forEach((t=>{for(const e of t.keys){if(!1===t.delete)return;this.config.data[e]=[]}}));const t=this.getResult();this.removeAllTags(),this.createCustomEvent("onDeleteAll",{result:t}),this.config.onDeleteAll(t),this.createCustomEvent("onChange",{result:t}),this.config.onChange(t)}update(t){this.config.data=t,this.init()}getResult(){const t={...this.config.data};return Object.entries(t).forEach((([e,s])=>{t[e]=s[0]?s:void 0})),t}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class c extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.openButton=this.getElements(this.config.open),this.closeButton=this.getElements(this.config.close),this.dialog=this.getElement(this.config.dialog,this.element),this.overlay=this.getElement(this.config.overlay),this.baseId=this.getBaseId(),this.aria=this.config.aria,this.init()}mergeOptions(t){const e={element:"",dialog:"[data-jetwindow-dialog]",open:"",close:"",overlay:"",aria:this.getAria(),status:"on",position:"center center",openToggle:!0,closeOutside:!0,autoOpen:!1,autoClose:!1,scrollbar:!1,windowTransitionIn:"is-transition-in",windowTransitionOut:"is-transition-out",overlayTransitionIn:"is-transition-in",overlayTransitionOut:"is-transition-out",breakpoints:{},onClick:t=>{},onOpen:(t,e)=>{},onOpenEnd:(t,e)=>{},onClose:(t,e)=>{},onCloseEnd:(t,e)=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setStatus(),this.setPosition(),this.autoOpen(),this.addOpenButtonEvent(),this.setCloseButton())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}getBaseId(){const t=[...document.querySelectorAll("[data-jetwindow]")].indexOf(this.element);return this.element.id||`jetwindow-${t}`}getAria(){return{close:{"aria-label":"Fechar"}}}setStatus(){const t="on"===this.config.status;this.element.classList.toggle("is-on",t),this.element.classList.toggle("is-off",!t),this.element.dataset.jetwindowStatus=t?"on":"",this.dialog.dataset.jetwindowDialogStatus=t?"on":"",this.element[(t?"set":"remove")+"Attribute"]("aria-hidden",!0),this.overlay&&this.overlay[(t?"set":"remove")+"Attribute"]("aria-hidden",!0)}setPosition(){const t="center center"===this.config.position,e=this.element.classList.contains("is-off"),s=!t&&!e;this.element[(s?"set":"remove")+"Attribute"]("data-jetwindow-position",this.config.position)}autoOpen(){!1!==this.config.autoOpen&&setTimeout(this.open.bind(this),1e3*this.config.autoOpen)}autoClose(){this.config.autoClose&&setTimeout(this.close.bind(this),1e3*this.config.autoClose)}open(){"off"===this.config.status||this.element.classList.contains("is-active")||(this.dialog.classList.add(this.config.windowTransitionIn),this.overlay&&this.overlay.classList.add(this.config.overlayTransitionIn),this.waitForTransitions(this.dialog,this.overlay,this.openEnd.bind(this)),this.removeOpenButtonEvent(),this.openButtonState("add"),this.elementState("add"),this.overlayState("add"),this.managePageScrollBar(!1),this.createCustomEvent("onOpen",{dialog:this.dialog,overlay:this.overlay}),this.config.onOpen(this.dialog,this.overlay))}openEnd(){this.dialog.classList.remove(this.config.windowTransitionIn),this.overlay&&this.overlay.classList.remove(this.config.overlayTransitionIn),this.addOpenButtonEvent(),this.addCloseButtonEvent(),this.addCloseOutsideEvent(),this.addKeyboardEvent(),this.createCustomEvent("onOpenEnd",{dialog:this.dialog,overlay:this.overlay}),this.config.onOpenEnd(this.dialog,this.overlay),this.autoClose()}close(){"off"!==this.config.status&&this.element.classList.contains("is-active")&&(this.dialog.classList.add(this.config.windowTransitionOut),this.overlay&&this.overlay.classList.add(this.config.overlayTransitionOut),this.waitForTransitions(this.dialog,this.overlay,this.closeEnd.bind(this)),this.removeOpenButtonEvent(),this.removeCloseButtonEvent(),this.removeCloseOutsideEvent(),this.removeKeyboardEvent(),this.managePageScrollBar(!0),this.createCustomEvent("onClose",{dialog:this.dialog,overlay:this.overlay}),this.config.onClose(this.dialog,this.overlay))}closeEnd(){this.dialog.classList.remove(this.config.windowTransitionOut),this.overlay&&this.overlay.classList.remove(this.config.overlayTransitionOut),this.addOpenButtonEvent(),this.openButtonState("remove"),this.elementState("remove"),this.overlayState("remove"),this.createCustomEvent("onCloseEnd",{dialog:this.dialog,overlay:this.overlay}),this.config.onCloseEnd(this.dialog,this.overlay)}addOpenButtonEvent(){this.openButton&&this.openButton.forEach(((t,e)=>{this[`openButtonEventHandler${e}`]=this.openButtonHandler.bind(this),t.addEventListener("click",this[`openButtonEventHandler${e}`])}))}removeOpenButtonEvent(){this.openButton&&this.openButton.forEach(((t,e)=>{t.removeEventListener("click",this[`openButtonEventHandler${e}`])}))}openButtonHandler(t){t.stopImmediatePropagation();const e=!t.currentTarget.classList.contains("is-active");!this.config.openToggle||this.config.openToggle&&e?this.open():this.close(),this.createCustomEvent("onClick",{event:t}),this.config.onClick(t)}setCloseButton(){this.closeButton&&this.closeButton.forEach((t=>{const e=t.getAttribute("aria-label")||this.aria.close["aria-label"];t.type="button",t.setAttribute("aria-label",e)}))}addCloseButtonEvent(){this.closeButton&&this.closeButton.forEach(((t,e)=>{this[`closeButtonEventHandler${e}`]=this.closeButtonHandler.bind(this),t.addEventListener("click",this[`closeButtonEventHandler${e}`])}))}removeCloseButtonEvent(){this.closeButton&&this.closeButton.forEach(((t,e)=>{t.removeEventListener("click",this[`closeButtonEventHandler${e}`])}))}closeButtonHandler(t){t.stopImmediatePropagation(),this.close(),this.createCustomEvent("onClick",{event:t}),this.config.onClick(t)}addCloseOutsideEvent(){this.config.closeOutside&&(this.closeOutsideEventHandler=this.closeOutsideHandler.bind(this),window.addEventListener("pointerdown",this.closeOutsideEventHandler))}removeCloseOutsideEvent(){window.removeEventListener("pointerdown",this.closeOutsideEventHandler)}closeOutsideHandler(t){this.dialog.contains(t.target)||(this.close(),this.createCustomEvent("onClick",{event:t}),this.config.onClick(t))}addKeyboardEvent(){this.config.closeOutside&&(this.keyboardEventHandler=this.keyboardHandler.bind(this),window.addEventListener("keyup",this.keyboardEventHandler))}removeKeyboardEvent(){window.removeEventListener("keyup",this.keyboardEventHandler)}keyboardHandler(t){t.stopImmediatePropagation(),"Escape"===t.key&&this.close()}openButtonState(t){this.openButton&&this.openButton.forEach((e=>e.classList[t]("is-active")))}elementState(t){this.element.classList[t]("is-active"),this.element.dataset.jetwindow="add"===t?"active":"",this.element[("add"===t?"set":"remove")+"Attribute"]("role","dialog"),this.element[("add"===t?"set":"remove")+"Attribute"]("aria-modal",!0),this.element[("add"===t?"remove":"set")+"Attribute"]("aria-hidden",!0)}overlayState(t){this.overlay&&(this.overlay.classList[t]("is-active"),this.overlay.dataset.jetwindowOverlay="add"===t?"active":"",this.overlay[("add"===t?"remove":"set")+"Attribute"]("aria-hidden",!0))}waitForTransitions(t,e,s){const i=t=>new Promise((e=>{if(!t)return e();const s=this.getTransitionType(t);t&&s?t.addEventListener(`${s}end`,e,{once:!0}):e()}));return Promise.all([i(t),i(e)]).then(s)}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}managePageScrollBar(t){if(this.config.scrollbar)return;const{body:e}=document,s=window.innerWidth-e.clientWidth,i=this.baseId.replace("-","-scrollbar-"),n=[...e.classList].filter((t=>t.includes("-scrollbar-"))).length;return!t&&n?e.classList.add(i):t&&n>1?e.classList.remove(i):(e.classList.toggle(i,!t),e.style.overflow=t?"":"hidden",void(e.style.paddingRight=t?"":`${s}px`))}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setStatus(),this.setPosition(),this.autoOpen(),this.addOpenButtonEvent()}}class u extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.element=this.getElement(this.config.element),this.honeypot=this.createHoneypot(),this.trackMouseMovementHandler=this.trackMouseMovement.bind(this),this.captchaOverHandler=this.captchaOver.bind(this),this.captchaClickHandler=this.captchaClick.bind(this),this.mouseMovements=[],this.isHumanMovement=!1,this.startTime=null,this.endTime=null,this.init()}mergeOptions(t){return{element:"",honeypot:!0,onClick:t=>{},onValid:()=>{},onInvalid:()=>{},...t}}init(){this.setCaptchaEvents()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}createHoneypot(){if(!this.config.honeypot)return;const t=document.createElement("input");return t.name=`${Math.random().toString(36).substring(7)}`,t.type="radio",t.style.position="absolute",t.style.top="-999999px",t.style.left="-999999px",this.element.append(t),t}setCaptchaEvents(){document.addEventListener("pointermove",this.trackMouseMovementHandler),this.element.addEventListener("pointerover",this.captchaOverHandler),this.element.addEventListener("click",this.captchaClickHandler)}trackMouseMovement(t){this.startTime||(this.startTime=Date.now()),this.mouseMovements.push([t.clientX,t.clientY]),this.mouseMovements.length>50&&this.mouseMovements.shift()}validateHumanMovement(){if(this.mouseMovements.length>10&&!this.isLinearMovement(this.mouseMovements)){this.endTime=Date.now();if((this.endTime-this.startTime)/1e3>1)return!0}return!1}isLinearMovement(t){if(t.length<3)return;let e=[];for(let s=1;s<t.length-1;s++){const[i,n]=[t[s-1].x,t[s-1].y],[a,o]=[t[s].x,t[s].y],[r,l]=[t[s+1].x,t[s+1].y],h=Math.atan2(l-o,r-a)-Math.atan2(o-n,a-i);e.push(h)}const s=e.reduce(((t,e)=>t+e),0)/e.length;return e.every((t=>Math.abs(t-s)<.1))}captchaClick(){const t=this.honeypot&&!this.honeypot.checked&&this.isHumanMovement;if(this.createCustomEvent("onClick",{valid:t}),this.config.onClick(t),!t)return this.createCustomEvent("onInvalid"),this.config.onInvalid();this.element.classList.add("is-enabled"),this.element.removeEventListener("click",this.captchaClickHandler),this.createCustomEvent("onValid"),this.config.onValid()}captchaOver(){const t=this.honeypot&&!this.honeypot.checked,e=this.validateHumanMovement();this.isHumanMovement=e,this.element.disabled=!e,this.mouseMovements=[],this.startTime=null,this.endTime=null,t&&e&&(document.removeEventListener("pointermove",this.trackMouseMovementHandler),this.element.removeEventListener("pointerover",this.captchaOverHandler))}validate(){const t=this.honeypot&&!this.honeypot.checked,e=!this.element.disabled,s=this.element.classList.contains("is-enabled"),i=this.isMobile||this.isHumanMovement;return t&&e&&s&&i}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}reset(){this.isHumanMovement=!1,this.element.classList.remove("is-enabled"),this.setCaptchaEvents()}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class d extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.element=this.getElement(this.config.element),this.addButton=this.getElement(this.config.add),this.deleteButton=this.getElement(this.config.delete),this.clonesTotal=0,this.init()}mergeOptions(t){return{element:"",add:"",delete:"",texts:"",fields:"label, input, select, textarea",attributes:["id","name","for"],maximumClones:0,onAdd:(t,e)=>{},onDelete:(t,e)=>{},...t}}init(){this.setAddButton(),this.setDeleteButton(),this.toggleDeleteButton()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}setAddButton(){this.addButton&&(this.addButton.onclick=this.add.bind(this))}add(){if(this.config.maximumClones&&this.clonesTotal>=this.config.maximumClones)return;this.clonesTotal+=1,this.toggleAddButton(),this.toggleDeleteButton(),this.createClone();const t=document.querySelectorAll(this.config.element);this.createCustomEvent("onAdd",{element:t[this.clonesTotal],index:this.clonesTotal}),this.config.onAdd(t[this.clonesTotal],this.clonesTotal)}toggleAddButton(){this.config.maximumClones&&(this.addButton.style.display=this.clonesTotal>=this.config.maximumClones?"none":"")}setDeleteButton(){this.deleteButton&&(this.deleteButton.onclick=this.delete.bind(this))}delete(){if(!this.clonesTotal)return;this.clonesTotal-=1,this.toggleAddButton(),this.toggleDeleteButton(),this.deleteClone();const t=document.querySelectorAll(this.config.element);this.createCustomEvent("onDelete",{element:t[this.clonesTotal],index:this.clonesTotal}),this.config.onDelete(t[this.clonesTotal],this.clonesTotal)}toggleDeleteButton(){this.deleteButton.style.display=this.clonesTotal<=0?"none":""}createClone(){const t=document.querySelectorAll(this.config.element),e=this.element.cloneNode(!0),s=this.config.texts?e.querySelectorAll(this.config.texts):[],i=e.querySelectorAll(this.config.fields);s.forEach((t=>{t.innerText=t.innerText.replace(/\d/g,this.clonesTotal+1)})),i.forEach((t=>{this.config.attributes.forEach((e=>{t.getAttribute(e)&&t.setAttribute(e,t.getAttribute(e).replace(/\d/g,this.clonesTotal+1))})),t.value=""})),t[this.clonesTotal-1].after(e)}deleteClone(){document.querySelectorAll(this.config.element)[this.clonesTotal+1].remove()}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class g extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.input=this.getElement(this.config.input),this.list=this.getElement(this.config.list),this.classes=this.config.classes,this.isRequired=this.input&&this.input.required,this.files={},this.init()}mergeOptions(t){const e={input:"",list:"",deleteIcon:!0,classes:this.getClasses(t),fileLimit:1/0,sizeLimit:2e7,onAdd:(t,e,s)=>{},onRemove:(t,e,s)=>{},onRepeat:(t,e,s)=>{},onLimit:(t,e,s)=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.input&&this.inputEvent()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{item:`${i}item`,button:`${i}button`,text:`${i}text`,delete:`${i}delete`}}getBaseClass(t){let e=t.input;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}inputEvent(){this.input.onchange=this.inputHandler.bind(this)}inputHandler(){const t=[...this.input.files],e=new DocumentFragment,s=[],i=[],n=[];for(const a of t){const t=Object.keys(this.files).length+1,o=this.getTotalSize(a.size);if(this.isFileAdded(this.files,a))s.push(a.name);else if(t<=this.config.fileLimit&&o<=this.config.sizeLimit){const t=a.name.replace(/[/[ .]/g,"-"),s=this.createListItem(a,t);this.files[t]=a,i.push(a.name),e.append(s)}else n.push(a.name)}this.attachedSize=this.getTotalSize(),s.length&&(this.createCustomEvent("onRepeat",{notAddedFiles:s,totalSize:this.attachedSize,sizeLimit:this.config.sizeLimit}),this.config.onRepeat(s,this.attachedSize,this.config.sizeLimit)),n.length&&(this.createCustomEvent("onLimit",{notAddedFiles:n,totalSize:this.attachedSize,sizeLimit:this.config.sizeLimit}),this.config.onLimit(n,this.attachedSize,this.config.sizeLimit)),i.length&&(this.createCustomEvent("onAdd",{addedFiles:i,totalSize:this.attachedSize,sizeLimit:this.config.sizeLimit}),this.config.onAdd(i,this.attachedSize,this.config.sizeLimit)),this.input.value="",this.checkDisabled(),this.list&&this.list.append(e)}getTotalSize(t=0){let e=t;for(let t in this.files)e+=this.files[t].size;return e}isFileAdded(t,e){return Object.values(t).some((t=>t.name===e.name&&t.size===e.size))}createListItem(t,e){const s=document.createElement("li"),i=document.createElement("button"),n=document.createElement("span");return s.className=this.classes.item,i.className=this.classes.button,i.type="button",n.className=this.classes.text,n.innerText=t.name,i.onclick=this.fileDeleteHandler.bind(this,i,e),i.append(n),this.config.deleteIcon&&i.append(this.createDeleteIcon()),s.append(i),s}createDeleteIcon(){const t=document.createElement("span");return t.className=this.classes.delete,t.innerHTML="boolean"==typeof this.config.deleteIcon?"":this.config.deleteIcon,t.setAttribute("aria-hidden",!0),t}fileDeleteHandler(t,e){delete this.files[e],t.parentElement.remove(),this.checkDisabled(),this.attachedSize=this.getTotalSize(),this.createCustomEvent("onRemove",{removedFiles:e,totalSize:this.attachedSize,sizeLimit:this.config.sizeLimit}),this.config.onRemove(e,this.attachedSize,this.config.sizeLimit)}checkDisabled(){this.isRequired&&(this.input.required=!Object.keys(this.files)[0])}getFiles(){return this.files}updateFormData(t){return Object.values(this.files).forEach((e=>t.append(this.input.name,e))),t}reset(){this.files={},this.list&&(this.list.innerHTML=""),this.resetRequired()}resetRequired(){this.input.required=this.isRequired}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class m extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.dynamic=this.dynamicMasks(),this.locale="pt-BR",this.currency="BRL",this.init()}mergeOptions(t){return{cel:"(99) 99999 9999",tel:"(99) 9999 9999",date:"99/99/9999",cep:"99999-999",cpf:"999.999.999-99",cnpj:"99.999.999/9999-99",onInput:(t,e)=>{},onKeyDown:(t,e)=>{},...t}}init(){this.setInputs()}dynamicMasks(){return["cash","area"]}setInputs(){document.querySelectorAll("[data-jetmask]").forEach((t=>{t.addEventListener("keydown",this.keydownHandler.bind(this)),t.addEventListener("input",this.manageInputHandler.bind(this))}))}manageInputHandler(t){t.stopImmediatePropagation();const e=t.target,s=e.dataset.jetmask;return this.isDynamic(s)?(this[`${s}InputHandler`](e),this.createCustomEvent("onInput",{event:t,mask:s}),this.config.onInput(t,s)):s in this.config?(this.inputHandler(e),this.createCustomEvent("onInput",{event:t,mask:s}),this.config.onInput(t,s)):void console.error(`Mask '${s}' not defined`)}isDynamic(t){return this.dynamic.includes(t)}keydownHandler(){event.stopImmediatePropagation();const t=event.target.dataset.jetmask;this.createCustomEvent("onKeyDown",{event,mask:t}),this.config.onKeyDown(event,t)}inputHandler(t){const e=t.dataset.jetmask;t.value=this.valueFormat(e,t.value)}valueFormat(t,e){t=this.config[t],e=this.unmaskNumber(e);const s=this.unmaskNumber(t).length,i=e.slice(0,s),n=this.createRegex(t);return i.match(n)?this.maskNumber(i,t):i}createRegex(t){const e=this.unmaskNumber(t).length;return new RegExp(`^\\d{0,${e}}$`,"g")}unmaskNumber(t){return`${t}`.replace(new RegExp(/[^\d]/,"g"),"")}maskNumber(t,e){const s=[];let i=0;for(let n=0;n<t.length;n++){if(e[i].match(/[^\d]/)){const t=e.split("").splice(i).join("").match(/[^\d]+/);s.push(t),i+=t[0].split("").length}s.push(t[n]),i+=1}return s.join("")}getElement(t){return"string"==typeof t?document.querySelector(t):t}cashInputHandler(t){t.value=this.cashFormat(event.target.value)}cashFormat(t){return(t=this.unmaskNumber(t))&&"00"!==t?(t=this.removeDecimalSign(t,2),this.currencyFormat(t,this.locale,this.currency)):""}currencyFormat(t,e="pt-BR",s="BRL"){return new Intl.NumberFormat(e,{style:"currency",currency:s}).format(t)}areaInputHandler(t){t.value=this.areaFormat(t.value);const e=t.value.length-3;this.setCaretPos(t,e)}areaFormat(t){return(t=this.unmaskNumber(t))&&"00"!==t?(t=this.removeDecimalSign(t,2),this.meterFormat(t,this.locale)):""}meterFormat(t,e="pt-BR"){return`${t=new Intl.NumberFormat(e,{style:"unit",unit:"meter",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}²`}setCaretPos(t,e){t.setSelectionRange(e,e)}removeDecimalSign(t,e){const s=e+1,i=-1*e;return t=(t=t.padStart(s,"0")).slice(0,i)+"."+t.slice(i)}cashToFloat(t){const e=/([+-]?[0-9|^.|^,]+)[\.|,]([0-9]+)$/gim.exec(t);if(!e)return t;const s=this.joinFloatNumber(e[1],e[2]);return parseFloat(s)}areaToFloat(t){const e=/^([0-9|^.|^,]+)[\.|,]([0-9]+)/gim.exec(t);return e?this.joinFloatNumber(e[1],e[2]):t}joinFloatNumber(t,e){const s=t.replace(/[.,]/g,"");return parseFloat(`${s}.${e}`)}maskInput(t,e){const s=this.getElement(t);s.dataset.jetmask=e,this.manageInputHandler(s)}getMaskedValue(t,e){return this.isDynamic(t)?this[`${t}Format`](e):this.config[t]?this.valueFormat(t,e):void console.error(`Mask '${t}' not defined`)}getUnmaskedValue(t,e){return this.isDynamic(t)?this[`${t}ToFloat`](e):this.config[t]?this.unmaskNumber(e):void console.error(`Mask '${t}' not defined`)}setLocale(t){this.locale=t}setCurrency(t){this.currency=t}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class p extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.element=this.getElement(this.config.element),this.stages=this.getElements(this.config.stage,this.element),this.previousButtons=this.getElements(this.config.previous,this.element),this.nextButtons=this.getElements(this.config.next,this.element),this.currentStage=this.config.startStage,this.blockedStages=[],this.firstLoad=!0,this.init()}mergeOptions(t){return{element:"",stage:"[data-jetstage-stage]",previous:"",next:"",startStage:0,keepPreviousEnabled:!1,disabledVisible:!1,validate:!0,transitionIn:"is-transition-in",transitionOut:"is-transition-out",onClick:(t,e)=>{},onChange:t=>{},onTransitionInStart:t=>{},onTransitionOutStart:t=>{},onTransitionInEnd:t=>{},onTransitionOutEnd:t=>{},onBlock:t=>{},onUnblock:t=>{},...t}}init(){this.setStageState(),this.addTransition(),this.setPreviousButton(),this.setNextButton(),this.firstLoad=!1}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}setStageState(){this.stages.forEach(((t,e)=>{const s=!(e===this.currentStage||this.config.keepPreviousEnabled&&e<this.currentStage),i=this.blockedStages.includes(e);t.classList.toggle("is-disabled",s),t.classList.toggle("is-blocked",i),this.config.disabledVisible||(t.style.display=s?"none":""),t.disabled=i}))}addTransition(){this.firstLoad||this.stages.forEach(((t,e)=>{const s=!(e===this.currentStage||this.config.keepPreviousEnabled&&e<this.currentStage)?"Out":"In",i=this.config[`transition${s}`],n="In"===s?"Out":"In",a=this.config[`transition${n}`];t.classList.remove(a),t.classList.add(i);const o=this.getTransitionType(t);o&&(this[`transition${s}EndHandler`]=this.transitionEnd.bind(this,e,o,s),this.transitionStart(e,s),t.addEventListener(`${o}end`,this[`transition${s}EndHandler`]))}))}transitionStart(t,e){this.createCustomEvent(`onTransition${e}Start`,{current:t}),this.config[`onTransition${e}Start`](t)}transitionEnd(t,e,s){this.stages[t].removeEventListener(`${e}end`,this[`transition${s}EndHandler`]),this.setStageState(),this.createCustomEvent(`onTransition${s}End`,{current:t}),this.config[`onTransition${s}End`](t)}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}setPreviousButton(){this.previousButtons&&this.previousButtons.forEach((t=>{t.onclick=this.previous.bind(this)}))}previous(){if(0===this.currentStage)return;let t=this.currentStage-1;for(;this.blockedStages.includes(t)&&t>0;)t-=1;this.currentStage=t,this.addTransition(),!this.getTransitionType(this.stages[t])&&this.setStageState(),this.createCustomEvent("onChange",{current:t}),this.config.onChange(t)}setNextButton(){this.nextButtons&&this.nextButtons.forEach((t=>{t.onclick=this.next.bind(this)}))}next(){if(this.currentStage===this.stages.length-1||!this.validate(this.currentStage))return;let t=this.currentStage+1;for(;this.blockedStages.includes(t)&&t<this.stages.length-1;)t+=1;this.currentStage=t,this.addTransition(),!this.getTransitionType(this.stages[t])&&this.setStageState(),this.createCustomEvent("onChange",{current:t}),this.config.onChange(t)}goTo(t){if(t<0||t>=this.stages.length)return;let e=0===t?t:t-1;for(;this.blockedStages.includes(e)&&e>0;)e-=1;const s=!this.validate(0===this.currentStage?this.currentStage:e),i=t===this.currentStage,n=this.blockedStages.includes(t);s||i||n||(this.currentStage=t,this.addTransition(),!this.getTransitionType(this.stages[t])&&this.setStageState(),this.createCustomEvent("onChange",{current:t}),this.config.onChange(t))}validate(t){if(!this.config.validate)return!0;return[...this.stages[t].querySelectorAll("[required]")].every((t=>t.reportValidity()))}block(t){this.blockedStages.includes(t)||(this.blockedStages.push(t),this.setStageState(),this.createCustomEvent("onBlock",{current:t}),this.config.onBlock(t))}unblock(t){const e=this.blockedStages.indexOf(t);-1!==e&&(this.blockedStages.splice(e,1),this.setStageState(),this.createCustomEvent("onUnblock",{current:e}),this.config.onUnblock(e))}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}}class f extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.button=this.getElement("[data-jetautocomplete-button]",this.element),this.input=this.getElement("[data-jetautocomplete-input]",this.element),this.clear=this.getElement(this.config.clear,this.element),this.icon=this.getElement("[data-jetautocomplete-icon]",this.element),this.box=this.getElement("[data-jetautocomplete-box]",this.element),this.list=this.getElement("[data-jetautocomplete-list]",this.element),this.names=this.valueToArray(this.config.name),this.classes=this.config.classes,this.baseId=this.getBaseId(),this.aria=this.config.aria,this.toggle=this.setToggle(),this.data=this.setData(),this.filteredData=this.data,this.selected=[],this.activeIndex=-1,this.init()}mergeOptions(t){const e={element:"",clear:"",name:"",classes:this.getClasses(t),aria:this.getAria(),label:"",labelFixed:!1,deselectAll:"",filter:"free",ignoreAccents:!0,ignoreGroups:!1,highlight:!1,notFound:"",multiple:!1,limit:!1,toggle:!1,autoHeight:!0,autoPosition:!0,scrollbar:!1,tags:!1,checkmark:!1,groupOption:!1,groupCheckmark:!1,groupTotal:!1,data:[],textKey:"",valueKey:"",counterKey:"",groupKey:"",set:{},breakpoints:{},onOpen:()=>{},onClose:()=>{},onClick:t=>{},onChange:t=>{},onDeselectAll:t=>{},onInput:t=>{},onLimit:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setElement(),this.setButton(),this.setInput(),this.setIcon(),this.setClearButton(),this.hideBox(),this.setList(),this.set())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}valueToArray(t){return Array.isArray(t)?t:[t]}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{option:`${i}option`,text:`${i}text`,counter:`${i}counter`,group:`${i}group`,name:`${i}name`,total:`${i}total`,checkmark:`${i}checkmark`,tag:`${i}tag`,"tag-text":`${i}tag-text`,"tag-delete":`${i}tag-delete`,highlight:`${i}highlight`,"not-found":`${i}not-found`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getBaseId(){const t=[...document.querySelectorAll("[data-jetautocomplete]")].indexOf(this.element);return this.element.id||`jetautocomplete-${t}`}getAria(){return{clear:{"aria-label":"Limpar"},tag:{"aria-label":"Remover"}}}setToggle(){return this.config.multiple||this.config.toggle}setData(){const{data:t,textKey:e,valueKey:s,groupKey:i,counterKey:n,groupOption:a}=this.config,o=this.groupArrayByKey(t,i);return Object.entries(o).flatMap((([t,r])=>{if(i){const l=this.names.map((e=>e===a?t:"")),h=this.getGroupTotal(o[t]);return[{[e]:t,[s]:l,[i]:t,[n]:h,isGroup:!0},...r]}return r}))}groupArrayByKey(t,e){return t.reduce(((t,s)=>(t[s[e]]=[...t[s[e]]||[],s],t)),{})}getGroupTotal(t){return t.reduce(((t,e)=>t+e[this.config.counterKey]),0)}setElement(){this.element.className+=this.config.data[0]?"":" is-disabled"}setButton(){this.button.setAttribute("role","combobox"),this.button.setAttribute("aria-haspopup","listbox"),this.button.setAttribute("aria-controls",this.baseId),this.button.setAttribute("aria-expanded",!1),this.button.onclick=this.buttonHandler.bind(this)}buttonHandler(t){t.preventDefault();if(this.input===document.activeElement&&this.input.value)return this.open();this.opened?this.close():this.open(),this.input.focus()}open(){this.opened||(this.clickOutsideHandler=this.clickOutside.bind(this),this.resizeHandler=this.resize.bind(this),window.addEventListener("pointerdown",this.clickOutsideHandler),window.addEventListener("resize",this.resizeHandler),this.createList(),this.restoreOptionFocus(),this.restoreOptionsState(),this.managePageScrollBar(!1),this.setDropdownState(!0),this.resize(),this.createCustomEvent("onOpen"),this.config.onOpen())}restoreOptionFocus(){const t=this.selected[0],e=[...this.list.querySelectorAll("li[aria-selected]")],s=this.list.querySelector("li[role]"),i=e[this.filteredData.findIndex((e=>e===t))]||s;this.setFocus(i)}restoreOptionsState(){this.selected.forEach((t=>this.setOptionState(t,!0)))}close(){this.opened&&(window.removeEventListener("pointerdown",this.clickOutsideHandler),window.removeEventListener("resize",this.resizeHandler),this.managePageScrollBar(!0),this.setDropdownState(!1),this.createCustomEvent("onClose"),this.config.onClose())}clickOutside(t){this.element.contains(t.target)||(this.displaySelectedValues(),this.enableClearButton(),this.close())}managePageScrollBar(t){if(this.config.scrollbar)return;const{body:e}=document,s=window.innerWidth-e.clientWidth,i=this.baseId.replace("-","-scrollbar-"),n=[...e.classList].filter((t=>t.includes("-scrollbar-"))).length;return!t&&n?e.classList.add(i):t&&n>1?e.classList.remove(i):(e.classList.toggle(i,!t),e.style.overflow=t?"":"hidden",void(e.style.paddingRight=t?"":`${s}px`))}setDropdownState(t){const e=this.getTransitionType(this.box);this.opened=t,this.box.dataset.jetautocompleteBox="opened",setTimeout((()=>this.box.classList.toggle("is-opened",t))),this.element.classList.toggle("is-opened",t),this.button.setAttribute("aria-expanded",t),this.button.focus(),this.manageBoxTransition(t,e)}manageBoxTransition(t,e){this.box.removeEventListener(`${e}end`,this.transitionEndHandler),!t&&e?(this.transitionEndHandler=this.hideBox.bind(this,e),this.box.addEventListener(`${e}end`,this.transitionEndHandler)):t||this.hideBox()}resize(){this.config.autoPosition&&(this.box.classList.toggle("is-opened-up",this.shouldOpenUp()),this.box.classList.toggle("is-opened-down",!this.shouldOpenUp())),this.config.autoHeight&&(this.box.style.maxHeight=this.setBoxHeight()||"")}shouldOpenUp(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=t-s;return e>n&&i>n}setBoxHeight(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=this.shouldOpenUp()?e:t-s;return n<i&&`${n}px`}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}hideBox(t){this.box.dataset.jetautocompleteBox="",this.box.removeAttribute("style"),this.list.innerHTML="",t&&this.box.removeEventListener(`${t}end`,this.transitionEndHandler)}setInput(){this.input.name=this.input.name||`${this.baseId}-${this.names.join().replace(/[^\w\s]/gi,"-")}`,this.input.placeholder=this.config.label,this.input.setAttribute("aria-autocomplete","list"),this.input.onkeydown=this.keydownHandler.bind(this),this.input.oninput=this.inputHandler.bind(this),this.config.tags||(this.input.onfocus=this.addComma.bind(this),this.input.onblur=this.displaySelectedValues.bind(this))}inputHandler(t){this.input.classList.toggle("is-filled",this.input.value),this.filter(),this.enableClearButton(),this.createCustomEvent("onInput",{event:t}),this.config.onInput(t)}addComma(){this.input.value&&!this.input.value.endsWith(", ")&&(event.target.value+=", ")}getGroupedSelectedValues(){const{groupKey:t,groupOption:e}=this.config,s=[...this.selected];if(this.names.includes(e)){const e=s.flatMap((e=>e.isGroup?e[t]:[]));return s.filter((s=>!e.includes(s[t])||s.isGroup))}return s}filter(t=this.input.value){const{filter:e,ignoreAccents:s,textKey:i}=this.config,n=this.getSearchTerm(t),a="free"!==e,o=[{key:i,value:n}];this.filteredData=this.filterObjectsByKeys(this.data,o,a,s),this.createList(this.filteredData,n),this.highlight(n),!this.filteredData[0]&&this.manageNotFound(n),this.restoreOptionFocus(),this.restoreOptionsState()}getSearchTerm(t){return t.split(",").pop().trim()}filterObjectsByKeys(t,e,s,i){const{ignoreGroups:n,groupKey:a}=this.config,o=this.filterOptions(t,e,s,i);if(n)return o;const r=this.getUniqueGroups(o,a),l=this.filterGroups(t,r,a);return this.mergeGroupsAndOptions(o,l)}filterOptions(t,e,s,i){return t.filter((t=>e.every((e=>this.filterByTerm(t,e,s,i)))))}filterByTerm(t,e,s,i){const{ignoreGroups:n,groupOption:a}=this.config,o=this.normalizeString(t[e.key],i),r=this.normalizeString(e.value,i),l=!(n&&r||!a&&r)||!t.isGroup;return s?o.startsWith(r)&&l:o.includes(r)&&l}normalizeString(t,e){const s=t.toLowerCase();return e?this.removeAccents(s):s}getUniqueGroups(t,e){return[...new Set(t.map((t=>t[e])))]}filterGroups(t,e,s){return[...new Set(t.filter((t=>t.isGroup&&e.includes(t[s]))))]}mergeGroupsAndOptions(t,e){return[...new Set(t.reduce(((t,s)=>{const i=e.findIndex((t=>t.group===s.group));return-1!==i&&(t.push(e[i]),e.splice(i,1)),t.push(s),t}),[]))]}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}highlight(t){if(!this.config.highlight)return;this.list.querySelectorAll("li[role]").forEach((e=>{const s=e.querySelector("span"),i=s.innerText,n=new RegExp(t||"<.*?>","gi"),a=`<mark class="${this.classes.highlight}" data-jetautocomplete-highlight>$&</mark>`,o=i.replace(n,a);s.innerHTML=o}))}manageNotFound(t){this.config.notFound&&this.list.append(this.createNotFound(t))}createNotFound(t){const e=document.createElement("li");return e.className=this.classes["not-found"],e.dataset.jetautocompleteNotFound="",e.innerHTML=this.config.notFound.replace("{term}",t),e.setAttribute("aria-readonly",!0),e}keydownHandler(t){switch(t.key){case"Home":case"End":case"ArrowUp":case"ArrowDown":return this.open(),this.setFocusByArrow(t);case"Enter":return this.keyEnterHandler(t);case"Escape":case"Tab":return this.close();case"Backspace":case"Clear":return this.autocompleteTagsDeleteHandler(t),this.autocompleteDeleteHandler(t),this.open();default:t.key.length&&this.open()}}setFocusByArrow(t){const e=this.list.querySelectorAll("li[role]"),s=e.length-1,i=this.getFocusIndex(t,this.activeIndex,s);this.maintainScrollVisibility(e[i],this.list),this.setFocus(e[i])}getFocusIndex(t,e,s){switch(t.key){case"Home":return 0;case"End":return s;case"ArrowUp":return Math.max(0,e-1);case"ArrowDown":return Math.min(s,e+1)}}setFocus(t){if(!t)return;const e=[...this.list.querySelectorAll("li[role]")],s=this.list.querySelector(".is-focused");this.activeIndex=e.indexOf(t),this.input.setAttribute("aria-activedescendant",t.id),s&&s.classList.remove("is-focused"),t.classList.add("is-focused")}maintainScrollVisibility(t,e){const{offsetHeight:s,offsetTop:i}=t,{offsetHeight:n,scrollTop:a}=e,o=i+s>a+n;i<a?e.scrollTo(0,i-e.offsetTop):o&&e.scrollTo(0,i-n+s)}keyEnterHandler(){if(!this.opened)return this.open();const t=this.list.querySelector(".is-focused"),e=new PointerEvent("click");t&&t.dispatchEvent(e),this.restoreOptionFocus(),this.addComma()}autocompleteDeleteHandler(t){if(this.config.tags)return;const{value:e,selectionStart:s,selectionEnd:i}=t.target,n=e.split(", "),a=this.getWordIndex(s,n),o=this.getWordIndex(i,n);this.isOutOfRange(a,o)||(t.preventDefault(),this.handleGroupedValues(a,o),this.updateValueAndCursor(t,n,a,o))}getWordIndex(t,e){return e.findIndex(((s,i)=>{const n=0===i?0:e.slice(0,i).join(", ").length+2,a=n+s.length+2;return t>=n&&t<=a}))}isOutOfRange(t,e){const s=this.getGroupedSelectedValues().length-1;return t>s&&e>s}handleGroupedValues(t,e){this.getGroupedSelectedValues().slice(t,e+1).forEach((t=>t.isGroup?this.groupHandler(t):this.optionHandler(t)))}updateValueAndCursor(t,e,s,i){const n=e.filter(((t,e)=>e<s||e>i)).join(", "),a=e[s-1]||"",o=n.indexOf(a)+a.length+2;t.target.value=n&&!n.endsWith(", ")?`${n}, `:n,t.target.selectionEnd=o}autocompleteTagsDeleteHandler(t){this.config.tags&&this.selected[0]&&!t.target.value&&[...this.button.querySelectorAll("[data-jetautocomplete-tag]")].pop().click()}setClearButton(){if(!this.clear)return;const t=this.clear.getAttribute("aria-label")||this.aria.clear["aria-label"];this.clear.type="button",this.clear.setAttribute("aria-label",t),this.clear.onclick=this.clearButtonHandler.bind(this)}clearButtonHandler(){this.config.tags||this.deselectAll(),this.input.value="",this.enableClearButton(),this.filter(""),this.input.focus()}enableClearButton(){this.clear&&this.clear.classList.toggle("is-enabled",this.input.value)}setIcon(){this.icon&&this.icon.setAttribute("aria-hidden",!0)}setList(){this.list.id=this.baseId,this.list.setAttribute("role","listbox"),this.config.multiple&&this.list.setAttribute("aria-multiselectable",!0)}createList(t=this.data,e=!1){const s=new DocumentFragment;t.forEach(((t,e)=>{const i=t.isGroup?this.createGroup(t,e):this.createOption(t,e);s.append(i)})),this.config.deselectAll&&!e&&s.prepend(this.createDeselect()),this.list.innerHTML="",this.list.append(s)}createDeselect(){const t=document.createElement("li"),e=this.createDeselectText();return t.className=`${this.classes.option} ${this.classes.option}--deselect`,t.id=`${this.baseId}-deselect`,t.dataset.jetautocompleteOption="",t.setAttribute("role","option"),t.onmouseover=this.setFocus.bind(this,t),t.onclick=this.deselectHandler.bind(this),t.append(e),t}createDeselectText(){const t=document.createElement("span");return t.className=this.classes.text,t.dataset.jetautocompleteText="",t.innerHTML=this.config.deselectAll,t}deselectHandler(){this.deselectAll(),this.enableClearButton();const t=this.getResult();this.createCustomEvent("onDeselectAll",{result:t}),this.config.onDeselectAll(t)}createGroup(t,e){const{valueKey:s,groupKey:i,counterKey:n,groupOption:a,groupCheckmark:o,groupTotal:r}=this.config,l=t[i],h=document.createElement("li"),c=this.createGroupText(l),u=t[n];if(h.className=this.classes.group,h.id=`${this.baseId}-group-${e}`,h.dataset.jetautocompleteGroup="",h.dataset.jetautocompleteGroupName=l,a){const e=this.createCheckmark(o,t[s]);h.setAttribute("role","option"),h.setAttribute("aria-selected",!1),h.onmouseover=this.setFocus.bind(this,h),h.onclick=this.groupHandler.bind(this,t),h.append(e)}if(h.append(c),r){const t=this.createCounter("total",u);h.append(t)}return h}createGroupText(t){const e=document.createElement("span");return e.className=this.classes.name,e.dataset.jetautocompleteName="",e.innerHTML=t,e}groupHandler(t){this.config.multiple&&(this.checkSelectAll(t)?this.deselectAll(t):this.selectAll(t))}createOption(t,e){const{checkmark:s,valueKey:i,groupKey:n,counterKey:a}=this.config,o=document.createElement("li"),r=this.createOptionText(t),l=this.createCheckmark(s,t[i]);if(o.className=this.classes.option,o.id=`${this.baseId}-option-${e}`,o.dataset.jetautocompleteOption="",n&&(o.dataset.jetautocompleteGroupName=t[n]),o.setAttribute("role","option"),o.setAttribute("aria-selected","false"),o.onmouseover=this.setFocus.bind(this,o),o.onclick=this.optionHandler.bind(this,t),o.append(l,r),t[a]){const e=this.createCounter("counter",t[a]);o.append(e)}return o}createOptionText(t){const{textKey:e}=this.config,s=document.createElement("span");return s.className=this.classes.text,s.dataset.jetautocompleteText="",s.innerHTML=t[e],s}optionHandler(t){if(!this.toggle&&this.selected.includes(t))return;this.getSearchTerm(this.input.value)&&this.filter(""),this.selectOption(t),this.setOptionState(t,this.selected.includes(t)),this.restoreOptionsState(),this.updateGroup(),this.displaySelectedValues(),this.enableClearButton(),!this.config.multiple&&this.close(),this.input.focus();const e=this.getResult();this.createCustomEvent("onClick",{result:e}),this.config.onClick(e),this.createCustomEvent("onChange",{result:e}),this.config.onChange(e)}displaySelectedValues(){this.createTags(),this.setInputValue(),this.setPlaceholder()}createTags(){if(!this.config.tags||this.config.labelFixed)return;const t=new DocumentFragment,e=this.getGroupedSelectedValues();this.removeTags(),e.forEach((e=>{t.append(this.createTag(e))})),this.input.before(t)}removeTags(){document.querySelectorAll("[data-jetautocomplete-tag]").forEach((t=>t.remove()))}createTag(t){const e=document.createElement("button"),s=this.createTagText(t),i=this.createTagIcon();return e.className=this.classes.tag,e.dataset.jetautocompleteTag="",e.type="button",e.setAttribute("aria-label",this.aria.tag["aria-label"]),e.onclick=this.tagHandler.bind(this,t),e.append(s,i),e}createTagText(t){const e=document.createElement("span");return e.className=this.classes["tag-text"],e.innerHTML=t[this.config.textKey],e}createTagIcon(){const t=document.createElement("div");return t.className=this.classes["tag-delete"],t.dataset.jetautocompleteTagDelete="",t.setAttribute("aria-hidden",!0),t}tagHandler(t){event.stopPropagation(),t.isGroup?this.groupHandler(t):this.optionHandler(t)}setInputValue(){const{labelFixed:t,tags:e,textKey:s}=this.config;if(t||e)return this.input.value="";const i=this.getGroupedSelectedValues().map((t=>t[s]));this.input.value=i.join(", ")}setPlaceholder(){const{labelFixed:t,label:e}=this.config;if(!t&&this.selected[0])return this.input.placeholder="";this.input.placeholder=e}checkSelectAll(t){const{data:e,groupKey:s}=this.config;return e.filter((e=>t[s]===e[s])).every((t=>this.selected.includes(t)))}selectAll(t){const{data:e,groupKey:s}=this.config;this.getSearchTerm(this.input.value)&&this.filter(""),e.forEach((e=>{e[s]!==t[s]||this.selected.includes(e)||(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup(),this.displaySelectedValues(),this.enableClearButton(),this.input.focus();const i=this.getResult();this.createCustomEvent("onChange",{result:i}),this.config.onChange(i)}deselectAll(t){const{groupKey:e}=this.config,s=[...this.selected];this.getSearchTerm(this.input.value)&&this.filter(""),s.forEach((i=>{(!t||i[e]===t[e]&&s.includes(i))&&(this.selectOption(i),this.setOptionState(i,!1))})),this.updateGroup(),this.displaySelectedValues(),this.enableClearButton(),this.input.focus();const i=this.getResult();this.createCustomEvent("onChange",{result:i}),this.config.onChange(i)}updateGroup(){const{groupOption:t}=this.config;t&&this.data.filter((t=>t.isGroup)).forEach((e=>{const s=this.checkSelectAll(e),i=this.selected.includes(e);this.names.includes(t)&&s!==i&&this.selectOption(e),this.setOptionState(e,s)}))}selectOption(t){const{limit:e,multiple:s}=this.config,i=this.selected.indexOf(t),n=this.toggle&&i>-1,a=!s&&t===this.selected[0];if(this.selected.length===e&&!n)return this.createCustomEvent("onLimit",{limit:e}),this.config.onLimit(e);s||(this.selected=[]),n||a?this.selected.splice(i,1):this.selected.push(t)}setOptionState(t,e){const s=this.list.querySelectorAll("[data-jetautocomplete-group], [aria-selected]")[this.filteredData.indexOf(t)];if(!s)return;const i=s.querySelector("input");s.setAttribute("aria-selected",e),s.classList.toggle("is-active",e),i&&(i.checked=e)}createCheckmark(t,e){const s=document.createElement("input");return s.className=this.classes.checkmark,s.dataset.jetautocompleteCheckmark="",s.type="checkbox",s.name=this.baseId,s.value=e,s.tabIndex=-1,s.hidden=!t,s}createCounter(t,e){const s=document.createElement("output"),i=`${t[0].toUpperCase()}${t.slice(1)}`;return s.className=this.classes[t],s.dataset[`jetautocomplete${i}`]="",s.innerHTML=e,s}getResult(){const{valueKey:t,groupKey:e}=this.config,s=this.selected[0]?{}:Object.fromEntries(this.names.map((t=>[t,void 0]))),i=this.selected.flatMap((t=>t.isGroup?t[e]:[])),n=this.selected.flatMap((s=>!i.includes(s[e])||s.isGroup?[s[t]]:[])),a=this.names[1]?this.unzipArrays(n):n[0]?[n]:n;return this.names.forEach(((t,e)=>s[t]=a[e])),s}unzipArrays(t){const e=Math.max(...t.map((t=>t.length)));return Array.from({length:e},((e,s)=>t.map((t=>t[s]))))}add(t,e=0){this.config.data.splice(e,0,...t),this.setData()}remove(t=this.config.data){this.config.data=this.config.data.filter((e=>!this.arrayIncludeArray(t,e))),this.setData()}set(t=this.config.set){if(!t||!Object.keys(t)[0])return;const{data:e,valueKey:s}=this.config,i=[...this.selected];t=this.getSelectedValues(t),e.forEach((e=>{i.includes(e)&&(this.selectOption(e),this.setOptionState(e,!1)),this.arrayIncludeArray(t,e[s])&&(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup(),this.displaySelectedValues(),this.enableClearButton()}getSelectedValues(t){const{data:e,valueKey:s,groupKey:i,groupOption:n}=this.config;if(t=this.names.map((e=>this.valueToArray(t[e]))),t=this.names[1]?this.zipArrays(t):t,this.names.includes(n)){const n=t.filter((t=>!t.filter(Boolean)[1])).map((t=>t.filter(Boolean)[0]));e.forEach((e=>{n.includes(e[i])&&t.push(e[s])}))}return t}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}arrayIncludeArray(t,e){return t=JSON.stringify(t,this.normalizeValues),e=JSON.stringify(e,this.normalizeValues),t.includes(e)}normalizeValues(t,e){return null===(e="number"==typeof e?`${e}`:e)?"":e}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setData(),this.setLabelValue(),this.removeTags(),this.createTags()}}class b extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.element=this.getElement(this.config.element),this.names=this.valueToArray(this.config.name),this.classes=this.config.classes,this.baseId=this.getBaseId(),this.multiple=this.setMultiple(),this.toggle=this.setToggle(),this.data=this.setData(),this.selected=[],this.init()}mergeOptions(t){const e={element:"",name:"",classes:this.getClasses(t),type:"button",deselectAll:"",multiple:!1,limit:!1,toggle:!1,checkmark:!0,groupOption:!1,groupCheckmark:!1,groupTotal:!1,data:[],textKey:"",valueKey:"",counterKey:"",groupKey:"",set:{},breakpoints:{},onClick:t=>{},onChange:t=>{},onDeselectAll:t=>{},onLimit:()=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setElement(),this.config.data[0]&&(this.createList(),this.set()))}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}valueToArray(t){return Array.isArray(t)?t:[t]}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{option:`${i}option`,text:`${i}text`,counter:`${i}counter`,group:`${i}group`,name:`${i}name`,total:`${i}total`,input:`${i}input`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getBaseId(){const t=[...document.querySelectorAll("[data-jetbutton]")].indexOf(this.element);return this.element.id||`jetbutton-${t}`}setMultiple(){const{type:t,multiple:e}=this.config;return"button"===t?e:"checkbox"===t}setToggle(){const{type:t,toggle:e}=this.config;return"button"===t?e:"checkbox"===t}setData(){const{data:t,textKey:e,valueKey:s,groupKey:i,counterKey:n,groupOption:a}=this.config,o=this.groupArrayByKey(t,i);return Object.entries(o).flatMap((([t,r])=>{if(i){const l=this.names.map((e=>e===a?t:"")),h=this.getGroupTotal(o[t]);return[{[e]:t,[s]:l,[i]:t,[n]:h,isGroup:!0},...r]}return r}))}groupArrayByKey(t,e){return t.reduce(((t,s)=>(t[s[e]]=[...t[s[e]]||[],s],t)),{})}getGroupTotal(t){return t.reduce(((t,e)=>t+e[this.config.counterKey]),0)}setElement(){this.element.className+=this.config.data[0]?"":" is-disabled"}createList(){const t=new DocumentFragment;this.clearList(),this.data.forEach((e=>{const s=e.isGroup?this.createGroup(e):this.createOption(e);t.append(s)})),this.config.deselectAll&&t.prepend(this.createDeselect()),this.element.append(t)}clearList(){this.element.querySelectorAll("[data-jetbutton-option]").forEach((t=>t.remove()))}createDeselect(){const t=document.createElement("button"),e=this.createDeselectText();return t.className=`${this.classes.option} ${this.classes.option}--deselect`,t.dataset.jetbuttonOption="",t.type="button",t.onclick=this.deselectHandler.bind(this),t.append(e),t}createDeselectText(){const t=document.createElement("span");return t.className=this.classes.text,t.dataset.jetbuttonText="",t.innerHTML=this.config.deselectAll,t}deselectHandler(){this.deselectAll();const t=this.getResult();this.createCustomEvent("onDeselectAll",t),this.config.onDeselectAll(t)}createGroup(t){const{type:e,valueKey:s,groupKey:i,counterKey:n,groupOption:a,groupCheckmark:o,groupTotal:r}=this.config,l=o&&a,h="button"===e?"button":"label",c="button"===e?"onclick":"onchange",u=t[i],d=document.createElement(l?h:"div"),g=this.createGroupText(u),m=t[n];if(d.className=this.classes.group,d.dataset.jetbuttonGroup=u,a&&(d.type="button",d.setAttribute("button"===e?"aria-pressed":"aria-checked",!1),d[c]=this.groupHandler.bind(this,t),"button"!==e)){const e=this.createCheckmark(o,t[s]);d.append(e)}if(d.append(g),r){const t=this.createCounter("total",m);d.append(t)}return d}createGroupText(t){const e=document.createElement("span");return e.className=this.classes.name,e.dataset.jetbuttonName="",e.innerHTML=t,e}groupHandler(t){this.multiple&&(this.checkSelectAll(t)?this.deselectAll(t):this.selectAll(t))}createOption(t){const{type:e,checkmark:s,valueKey:i,groupKey:n,counterKey:a}=this.config,o="button"===e?"button":"label",r="button"===e?"onclick":"onchange",l=document.createElement(o),h=this.createOptionText(t);return l.className=this.classes.option,l.dataset.jetbuttonOption="",n&&(l.dataset.jetbuttonGroupName=t[n]),l.type="button",l.setAttribute("button"===e?"aria-pressed":"aria-checked","false"),l[r]=this.optionHandler.bind(this,t),"button"!==e&&l.append(this.createCheckmark(s,t[i])),l.append(h),t[a]&&l.append(this.createCounter("counter",t[a])),l}createOptionText(t){const{textKey:e}=this.config,s=document.createElement("span");return s.className=this.classes.text,s.dataset.jetbuttonText="",s.innerHTML=t[e],s}optionHandler(t){if(!this.toggle&&this.selected.includes(t))return;!this.multiple&&this.selected[0]&&this.setOptionState(this.selected[0],!1),this.selectOption(t),this.setOptionState(t,this.selected.includes(t)),this.updateGroup();const e=this.getResult();this.createCustomEvent("onClick",e),this.config.onClick(e),this.createCustomEvent("onChange",e),this.config.onChange(e)}checkSelectAll(t){const{data:e,groupKey:s}=this.config;return e.filter((e=>t[s]===e[s])).every((t=>this.selected.includes(t)))}selectAll(t){const{data:e,groupKey:s}=this.config;e.forEach((e=>{e[s]!==t[s]||this.selected.includes(e)||(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup();const i=this.getResult();this.createCustomEvent("onChange",i),this.config.onChange(i)}deselectAll(t){const{groupKey:e}=this.config;[...this.selected].forEach((s=>{(!t||s[e]===t[e]&&this.selected.includes(s))&&(this.selectOption(s),this.setOptionState(s,!1))}));const s=this.getResult();this.updateGroup(),this.createCustomEvent("onChange",s),this.config.onChange(s)}updateGroup(){const{groupOption:t}=this.config;t&&this.data.filter((t=>t.isGroup)).forEach((e=>{const s=this.checkSelectAll(e),i=this.selected.includes(e);this.names.includes(t)&&s!==i&&this.selectOption(e),this.setOptionState(e,s)}))}selectOption(t){const{limit:e}=this.config,s=this.selected.indexOf(t),i=this.toggle&&s>-1,n=!this.multiple&&t===this.selected[0];if(this.selected.length===e&&!i)return this.createCustomEvent("onLimit",e),this.config.onLimit(e);this.multiple||(this.selected=[]),i||n?this.selected.splice(s,1):this.selected.push(t)}setOptionState(t,e){const s="button"===this.config.type?"aria-pressed":"aria-checked",i=this.element.querySelectorAll(`[data-jetbutton-group], [${s}]`)[this.data.indexOf(t)];if(!i)return;const n=i.querySelector("input");i.setAttribute(s,e),i.classList.toggle("is-active",e),n&&(n.checked=e)}createCheckmark(t,e){const s=document.createElement("input");return s.className=this.classes.input,s.dataset.jetbuttonInput="",s.type=this.config.type,s.name=this.baseId,s.value=e,s.hidden=!t,s}createCounter(t,e){const s=document.createElement("output"),i=`${t[0].toUpperCase()}${t.slice(1)}`;return s.className=this.classes[t],s.dataset[`jetbutton${i}`]="",s.innerHTML=e,s}getResult(){const{valueKey:t,groupKey:e}=this.config,s=this.selected[0]?{}:Object.fromEntries(this.names.map((t=>[t,void 0]))),i=this.selected.flatMap((t=>t.isGroup?t[e]:[])),n=this.selected.flatMap((s=>!i.includes(s[e])||s.isGroup?[s[t]]:[])),a=this.names[1]?this.unzipArrays(n):n[0]?[n]:n;return this.names.forEach(((t,e)=>s[t]=a[e])),s}unzipArrays(t){const e=Math.max(...t.map((t=>t.length)));return Array.from({length:e},((e,s)=>t.map((t=>t[s]))))}add(t,e=0){this.config.data.splice(e,0,...t),this.setData()}remove(t=this.config.data){this.config.data=this.config.data.filter((e=>!this.arrayIncludeArray(t,e))),this.setData()}set(t=this.config.set){if(!t||!Object.keys(t)[0])return;const{data:e,valueKey:s}=this.config,i=[...this.selected];t=this.getSelectedValues(t),e.forEach((e=>{i.includes(e)&&(this.selectOption(e),this.setOptionState(e,!1)),this.arrayIncludeArray(t,e[s])&&(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup()}getSelectedValues(t){const{data:e,valueKey:s,groupKey:i,groupOption:n}=this.config;if(t=this.names.map((e=>this.valueToArray(t[e]))),t=this.names[1]?this.zipArrays(t):t,this.names.includes(n)){const n=t.filter((t=>!t.filter(Boolean)[1])).map((t=>t.filter(Boolean)[0]));e.forEach((e=>{n.includes(e[i])&&t.push(e[s])}))}return t}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}arrayIncludeArray(t,e){return t=JSON.stringify(t,this.normalizeValues),e=JSON.stringify(e,this.normalizeValues),t.includes(e)}normalizeValues(t,e){return null===(e="number"==typeof e?`${e}`:e)?"":e}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setData()}}class v extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.element=this.getElement(this.config.element),this.button=this.getElement(this.config.button,this.element),this.inputStart=this.getElement(this.config.inputStart,this.element),this.inputEnd=this.getElement(this.config.inputEnd,this.element),this.inputs=[this.inputStart,this.inputEnd].filter(Boolean),this.clearStart=this.getElement(this.config.clearStart,this.element),this.clearEnd=this.getElement(this.config.clearEnd,this.element),this.clears=[this.clearStart,this.clearEnd].filter(Boolean),this.icon=this.getElement("[data-jetdate-icon]",this.element),this.box=this.getElement("[data-jetdate-box]",this.element),this.previousButton=this.getElement(this.config.previous,this.element),this.nextButton=this.getElement(this.config.next,this.element),this.container=this.getElement("[data-jetdate-container]",this.element),this.names=this.stringToArray(this.config.name),this.classes=this.config.classes,this.baseId=this.getBaseId(),this.aria=this.config.aria,this.selectedValues=[],this.opened=!this.button,this.transitioning,this.init()}mergeOptions(t){const e={element:"",button:"",inputStart:"",clearStart:"",inputEnd:"",clearEnd:"",previous:"",next:"",name:"",classes:this.getClasses(t),aria:this.getAria(),startDate:"",monthsToShow:1,rangeMin:"",rangeMax:"",disabledDays:[],disabledPast:!0,locale:"pt-BR",autoHeight:!0,autoPosition:!0,scrollbar:!1,inputStartAttributes:{},inputEndAttributes:{},inputFormat:{},set:{},breakpoints:{},onOpen:()=>{},onClose:()=>{},onClick:t=>{},onChange:t=>{},onClear:(t,e)=>{},onFocus:t=>{},onInput:t=>{},onKeyUp:t=>{},onBlur:(t,e)=>{},onLimit:t=>{},onReset:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setInputAttributes(),this.setDisabledDays(),this.setButton(),this.setBox(),this.createInputs(),this.setClearButtons(),this.setIcon(),this.previous(),this.next(),!this.button&&this.buildCalendar(),this.set())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{calendar:`${i}calendar`,title:`${i}title`,week:`${i}week`,"week-day":`${i}week-day`,month:`${i}month`,blank:`${i}blank`,day:`${i}day`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getBaseId(){const t=[...document.querySelectorAll("[data-jetdate]")].findIndex((t=>t===this.element));return this.element.id||`jetdate-${t}`}getAria(){return{"clear-start":{"aria-label":"Limpar"},"clear-end":{"aria-label":"Limpar"},previous:{"aria-label":"Ir para o mês anterior"},next:{"aria-label":"Ir para o próximo mês"}}}stringToArray(t){return"string"==typeof t?[t]:t}setInputAttributes(){this.inputs.forEach(((t,e)=>{const s=0===e?"Start":"End",i=this.config[`input${s}Attributes`];i&&Object.entries(i).forEach((([e,s])=>{t.setAttribute(e,s),"value"===e&&this.setValue(s)}))}))}setDisabledDays(){if(!this.config.disabledPast)return;const t=new Date,e=["0001-01-01",new Date(t.setDate(t.getDate()-1)).toLocaleDateString("en-CA")];this.config.disabledDays.push(e)}buildCalendar(t,e,s){const{monthsToShow:i}=this.config,n=this.getStartDate(),[a,o]=n.split("-").map((t=>Number(t)));t=t||o,e=e||a,!this.opened&&this.inputStart&&this.inputEnd===document.activeElement&&this.selectedValues[0]&&(t=t-i+1);const r="previous"===s?"prepend":"append",l=s?i+1:i;this.container.innerHTML="";for(let i=0;i<l;i++){let n="previous"===s?t-i:t+i;const a=this.updateYear(n,e);n=this.updateMonth(n),this.createCalendar(n,a,r,i)}}getStartDate(){const t=document.activeElement,e=this.inputEnd===t?this.inputEnd:this.inputStart,s=this.getInputISODate(e)||this.config.startDate||this.getToday();return Array.isArray(s)?s[0]:s}getInputISODate(t){const e=this.inputs.findIndex((e=>e===t)),s=this.getResult()[this.names[e]];return s?s[0]:null}goToMonthYear(t){if(!this.opened)return;const{monthsToShow:e}=this.config,s=this.container.querySelector("button").dataset.jetdateDate,i=new Date(`${s}T00:00:00`),n=new Date(`${t}T00:00:00`),a=this.getMonthDifference(i,n);return a<0?this.previousHandler(Math.abs(a)-1):a>=e?this.nextHandler(a-e):void 0}getMonthDifference(t,e){const s=t.getMonth(),i=e.getMonth(),n=t.getFullYear();return i-s+12*(e.getFullYear()-n)}setButton(){this.button&&(this.button.setAttribute("role","combobox"),this.button.setAttribute("aria-haspopup","dialog"),this.button.setAttribute("aria-controls",`${this.baseId}-box`),this.button.setAttribute("aria-expanded",!1),this.button.onclick=this.buttonHandler.bind(this))}buttonHandler(){if(this.inputs.some((t=>t===document.activeElement)))return this.open();this.opened?this.close():this.open()}setBox(){this.button||(this.box.dataset.jetdateBox="fixed")}open(){this.opened||(this.clickOutsideHandler=this.clickOutside.bind(this),this.resizeHandler=this.resize.bind(this),window.addEventListener("pointerdown",this.clickOutsideHandler),window.addEventListener("resize",this.resizeHandler),this.buildCalendar(),this.managePageScrollBar(!1),this.setDropdownState(!0),this.resize(),this.createCustomEvent("onOpen"),this.config.onOpen())}close(){this.opened&&(window.removeEventListener("pointerdown",this.clickOutsideHandler),window.removeEventListener("resize",this.resizeHandler),this.managePageScrollBar(!0),this.setDropdownState(!1),this.createCustomEvent("onClose"),this.config.onClose())}clickOutside(t){this.element.contains(t.target)||(this.enableClearButton(),this.close())}managePageScrollBar(t){if(this.config.scrollbar)return;const{body:e}=document,s=window.innerWidth-e.clientWidth,i=this.baseId.replace("-","-scrollbar-"),n=[...e.classList].filter((t=>t.includes("-scrollbar-"))).length;return!t&&n?e.classList.add(i):t&&n>1?e.classList.remove(i):(e.classList.toggle(i,!t),e.style.overflow=t?"":"hidden",void(e.style.paddingRight=t?"":`${s}px`))}setDropdownState(t){const e=this.getTransitionType(this.box);this.opened=t,this.box.dataset.jetdateBox="opened",this.box.classList.toggle("is-opened",t),this.element.classList.toggle("is-opened",t),this.button.setAttribute("aria-expanded",t),this.button.focus(),this.manageBoxTransition(t,e)}manageBoxTransition(t,e){this.box.removeEventListener(`${e}end`,this.transitionEndHandler),!t&&e?(this.transitionEndHandler=this.hideBox.bind(this,e),this.box.addEventListener(`${e}end`,this.transitionEndHandler)):t||this.hideBox()}resize(){const t=window.innerWidth-(this.element.getBoundingClientRect().left+this.box.offsetWidth);this.box.style.left=t<=0?`${t}px`:"",this.config.autoPosition&&(this.box.classList.toggle("is-opened-up",this.shouldOpenUp()),this.box.classList.toggle("is-opened-down",!this.shouldOpenUp())),this.config.autoHeight&&(this.box.style.maxHeight=this.setBoxHeight()||"")}shouldOpenUp(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=t-s;return e>n&&i>n}setBoxHeight(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=this.shouldOpenUp()?e:t-s;return n<i&&`${n}px`}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}hideBox(t){this.box.dataset.jetdateBox="",this.box.removeAttribute("style"),this.container.innerHTML="",t&&this.box.removeEventListener(`${t}end`,this.transitionEndHandler)}createInputs(){this.inputs.forEach(((t,e)=>{t.onclick=this.focusHandler.bind(this,e),t.onfocus=this.focusHandler.bind(this,e),t.addEventListener("input",this.inputHandler.bind(this)),t.onkeydown=this.keyDownHandler.bind(this,e),t.onkeyup=this.keyUpHandler.bind(this,e),t.onblur=this.blurHandler.bind(this)}))}focusHandler(t){setTimeout((()=>{const e=this.getCursorValueIndex(this.inputs[t]),s=1===this.inputs.length&&2===this.names.length,i=this.inputs[t].value.includes(" - "),n=this.selectedValues[s?e:t];s&&!i&&1===this.selectedValues.length&&(this.inputs[t].value+=" - "),n&&this.goToMonthYear(n),this.createCustomEvent("onFocus",{event}),this.config.onFocus(event)}))}inputHandler(t){this.createCustomEvent("onInput",{event:t}),this.config.onInput(t)}keyDownHandler(t){if(!1===this.getCursorValueIndex(this.inputs[t])&&("Backspace"===event.key||"Clear"===event.key))return event.preventDefault();"Tab"!==event.key&&this.inputStart&&1===t&&!this.selectedValues[0]&&(this.inputStart.focus(),this.inputStart.value=this.inputEnd.value)}keyUpHandler(t){const e=event.target.value.split(" - "),s=this.getCursorValueIndex(this.inputs[t]);e.forEach(((i,n)=>{t=e.length>1?n:t;const a=this.convertToISODate(i);if(!(e.length>1)||this.selectedValues[0])if(this.isValidDateOption(i,t))this.selectedValues[t]=a,this.goToMonthYear(this.selectedValues[e.length>1?s:t]),this.setDaysState();else if(!i){this.selectedValues=this.selectedValues[0]&&1===t?[this.selectedValues[0]]:[];const e=this.getToday();!this.selectedValues[0]&&this.goToMonthYear(e),this.fillInput(),this.setDaysState(),this.cleanInput()}})),this.enableClearButton(),this.createCustomEvent("onKeyUp",{event}),this.config.onKeyUp(event)}getCursorValueIndex(t){const{selectionStart:e,selectionEnd:s,value:i}=t,n=i.includes(" - "),a=i.indexOf(" - ");return!(n&&s>a&&s<a+4)&&(e<=a?0:1)}isValidDateOption(t,e){const s=this.convertToISODate(t),i=this.isValidDate(s),n=this.isDisabledDay(s),a=this.rangeHasDisabled(s,e),o=this.checkRangeLimit(s),r=1===e&&this.dateBeforeSelected(s),l=0===e&&this.dateAfterSelected(s);return i&&!n&&!a&&!o&&!r&&!l}isValidDate(t){return new Date(t).getTime()==new Date(t).getTime()}blurHandler(){const t=this.getResult();this.fillInput(),this.createCustomEvent("onBlur",{result:t,event}),this.config.onBlur(t,event),this.createCustomEvent("onChange",{result:t}),this.config.onChange(t)}setClearButtons(){this.clears.forEach(((t,e)=>{const s=0===e?"start":"end",i=t.getAttribute("aria-label")||this.aria[`clear-${s}`]["aria-label"];t.type="button",t.setAttribute("aria-label",i),t.onclick=this.clearHandler.bind(this,e)}))}clearHandler(t){this.selectedValues=1===t?[this.selectedValues[0]]:[];const e=this.getStartDate(),s=this.getResult();this.goToMonthYear(this.selectedValues[0]||e),this.cleanInput(),this.setDaysState(),this.enableClearButton(),this.createCustomEvent("onClear",{result:s,event}),this.config.onClear(s,event),this.createCustomEvent("onChange",{result:s}),this.config.onChange(s)}enableClearButton(){this.clears.forEach(((t,e)=>{t.classList.toggle("is-enabled",this.inputs[e].value)}))}previous(){this.previousButton&&(this.previousButton.onclick=this.previousHandler.bind(this,0))}previousHandler(t=0){if(this.transitioning)return;const{monthsToShow:e}=this.config,s=this.container.querySelector("button").dataset.jetdateDate;let[i,n]=s.split("-").map((t=>Number(t)));const a=n+(e-1-t);i=this.updateYear(a,i),n=this.updateMonth(a),this.transitioning=!0,this.box.style.width=`${this.box.offsetWidth}px`,this.buildCalendar(n,i,"previous"),this.container.style.transform=`translateX(-${100/(e+1)}%)`,setTimeout((()=>{this.container.classList.add("is-transition"),this.container.style.transform="translateX(0)"})),this.transitionEnd(this.previousTransitionEndCallback.bind(this))}previousTransitionEndCallback(){document.activeElement!==this.inputStart&&document.activeElement!==this.inputEnd&&(this.box.style.width="",this.box.style.transform="",this.container.firstChild.querySelector("button:last-child").focus()),this.container.lastChild.remove()}next(){this.nextButton&&(this.nextButton.onclick=this.nextHandler.bind(this,0))}nextHandler(t=0){if(this.transitioning)return;const{monthsToShow:e}=this.config,s=this.container.lastChild.querySelector("button").dataset.jetdateDate;let[i,n]=s.split("-").map((t=>Number(t)));const a=n-(e-1-t);i=this.updateYear(a,i),n=this.updateMonth(a),this.transitioning=!0,this.box.style.width=`${this.box.offsetWidth}px`,this.buildCalendar(n,i,"next"),this.container.classList.add("is-transition"),this.container.style.transform=`translateX(-${100/(e+1)}%)`,this.transitionEnd(this.nextTransitionEndCallback.bind(this))}nextTransitionEndCallback(){this.container.firstChild.remove(),document.activeElement!==this.inputStart&&document.activeElement!==this.inputEnd&&(this.box.style.width="",this.box.style.transform="",this.container.lastChild.querySelector("button").focus())}transitionEnd(t){this.transitionHandler=this.transitionEndHandler.bind(this,t),this.container.addEventListener("transitionend",this.transitionHandler)}transitionEndHandler(t){this.transitioning=!1,this.container.classList.remove("is-transition"),this.container.removeAttribute("style"),this.container.removeEventListener("transitionend",this.transitionHandler),t()}setIcon(){this.icon&&this.icon.setAttribute("aria-hidden",!0)}createCalendar(t,e,s,i){const n=document.createElement("div");n.className=this.classes.calendar,n.dataset.jetdateCalendar=`${t}-${e}`,n.setAttribute("role","grid"),n.setAttribute("aria-labelledby",`${this.baseId}-title-${i}`),n.append(this.createTitle(t,e,i),this.createWeekTitle());const a=this.getFirstMonthDay(t,e),o=this.getDaysInMonth(t,e)+a-1;let r=this.createMonth();for(let t=0;t<a-1;t++)r.append(this.createBlank());for(let s=a-1;s<o;s++){const i=this.createDay(s,a,t,e);r.append(i)}n.onkeydown=this.keydown.bind(this),n.append(r),this.container[s](n),this.setDaysState()}createTitle(t,e,s){const i=document.createElement("div"),n=this.createMonthsMap(this.config.locale,"long");return t=Object.values(n)[t-1],i.className=this.classes.title,i.id=`${this.baseId}-title-${s}`,i.dataset.jetdateTitle="",i.innerHTML=`${t} ${e}`,i}createMonthsMap(t,e){const s=[...Array(12).keys()],i=new Intl.DateTimeFormat(t,{month:e});return s.reduce(((t,e)=>{const s=i.format(new Date(2e3,e,1)),n=`${s.charAt(0).toUpperCase()}${s.slice(1)}`;return{...t,[e+1]:n}}),{})}createWeekTitle(){const t=document.createElement("div"),e=this.createWeekDaysMap(this.config.locale,"narrow");return t.className=this.classes.week,t.dataset.jetdateWeek="",Object.values(e).forEach((e=>{const s=document.createElement("div");s.className=this.classes["week-day"],s.dataset.jetdateWeekDay="",s.innerHTML=e,t.append(s)})),t}createWeekDaysMap(t,e){const s=[...Array(7).keys()],i=new Intl.DateTimeFormat(t,{weekday:e});return s.reduce(((t,e)=>(t[e+1]=i.format(new Date(2e3,1,e-1)),t)),{})}createMonth(){const t=document.createElement("div");return t.className=this.classes.month,t.dataset.jetdateMonth="",t}createBlank(){const t=document.createElement("div");return t.className=this.classes.blank,t.dataset.jetdateBlank="",t.setAttribute("aria-selected",!1),t}createDay(t,e,s,i){const n=document.createElement("button"),a=t-e+2,o=this.normalizeDate(`${i}-${s}-${a}`),r=this.getToday();return n.className=this.classes.day,n.dataset.jetdateDay="",n.dataset.jetdateDate=o,n.dataset.jetdateColumn=t%7+1,n.type="button",n.innerText=a,n.setAttribute("aria-selected",!1),n.setAttribute("role","gridcell"),n.setAttribute("aria-label",this.formatLocaleDate(o,{weekday:"long",year:"numeric",month:"long",day:"numeric"})),n.tabIndex=-1,new Date(o).getTime()===new Date(r).getTime()&&(n.className+=` ${this.classes.day}--today`,n.dataset.jetdateDay="today",n.tabIndex=this.selectedValues[0]?-1:0),this.isDisabledDay(o)?(n.className+=" is-disabled",n.disabled=!0,n):(n.onclick=this.dayHandler.bind(this,o),n)}isDisabledDay(t){const e=new Date(t);return this.config.disabledDays.some((t=>{const[s,i]=Array.isArray(t)?t:[t,t],n=new Date(s),a=new Date(i);return e>=n&&e<=a}))}dayHandler(t){const e=this.checkRangeLimit(t),s=2===this.selectedValues.length,i=this.dateBeforeSelected(t),n=this.rangeHasDisabled(t),a=this.names[1];if(e)return;(s||i||n||!a)&&(this.selectedValues=[]),this.selectedValues.push(t),this.fillInput(),this.setDaysState(),this.enableClearButton();const o=this.getResult();this.createCustomEvent("onClick",{result:o,event}),this.config.onClick(o,event),this.createCustomEvent("onChange",{result:o}),this.config.onChange(o)}checkRangeLimit(t){const{rangeMin:e,rangeMax:s}=this.config;if(!e&&!s)return;const i=this.selectedValues[0],n=this.dateDiff(i,t),a=n<e||n>s;return a&&(this.createCustomEvent("onLimit",{limit:n}),this.config.onLimit(n)),a}dateDiff(t,e){return(new Date(e)-new Date(t))/864e5+1}fillInput(){const t=1===this.inputs.length&&2===this.names.length,e=this.selectedValues[0]?this.selectedValues.map((t=>this.formatLocaleDate(t,this.config.inputFormat))):[];if(t)return this.inputs[0].value=e.join(" - ");this.inputs.forEach(((t,s)=>{t.value=e[s]})),this.cleanInput()}cleanInput(){this.inputs.forEach(((t,e)=>{this.selectedValues[e]||(t.value="")}))}dateBeforeSelected(t){return new Date(t)<new Date(this.selectedValues[0])}dateAfterSelected(t){return new Date(t)>new Date(this.selectedValues[1])}rangeHasDisabled(t,e=1){return this.config.disabledDays.some((s=>{s=Array.isArray(s)?s:[s,s];const i=new Date(1===e?this.selectedValues[0]:t),n=new Date(1===e?t:this.selectedValues[0]),a=new Date(s[0]),o=new Date(s[1]);return i<a&&n>o}))}setDaysState(){this.container.querySelectorAll("button").forEach((t=>{const e=t.dataset.jetdateDate;this.deselectDay(t),this.selectFirstDay(e,t),this.selectDay(e,t),this.selectLastDay(e,t)}))}deselectDay(t){t.classList.remove("is-selected","is-selected-first","is-selected-last"),t.setAttribute("aria-selected",!1),this.selectedValues[0]&&(t.tabIndex=-1)}selectFirstDay(t,e){t===this.selectedValues[0]&&(e.classList.add("is-selected"),e.setAttribute("aria-selected",!0),e.tabIndex=0,(this.names[1]||this.selectedValues[1])&&e.classList.add("is-selected-first"))}selectDay(t,e){const s=new Date(this.selectedValues[0]),i=new Date(this.selectedValues[1]);new Date(t)>=s&&new Date(t)<=i&&(e.classList.add("is-selected"),e.setAttribute("aria-selected",!0))}selectLastDay(t,e){t===this.selectedValues[1]&&(e.classList.add("is-selected","is-selected-last"),e.setAttribute("aria-selected",!0),e.tabIndex=0)}keydown(t){const e=document.activeElement,s=e.dataset.jetdateDate,[i,n,a]=s.split("-").map((t=>Number(t))),o=this.getDaysInMonth(n,i);switch(t.key){case"ArrowUp":return this.focusOn(t,i,n,a-7);case"ArrowDown":return this.focusOn(t,i,n,a+7);case"ArrowLeft":return this.focusOn(t,i,n,a-1);case"ArrowRight":return this.focusOn(t,i,n,a+1);case"PageUp":return this.focusOn(t,i,n,1);case"PageDown":return this.focusOn(t,i,n,o);case" ":case"Enter":return this.keyEnterHandler(e)}}focusOn(t,e,s,i){t.preventDefault();const n=document.activeElement,a=n.parentElement.parentElement,o=Number(a.dataset.jetdateCalendar.split("-")[0]),r=this.container.querySelector("[data-jetdate-calendar]"),l=Number(r.dataset.jetdateCalendar.split("-")[0]),h=this.updateMonth(l+this.config.monthsToShow-1),c=n.dataset.jetdateColumn,u=a.querySelectorAll(`[data-jetdate-column="${c}"]:not([disabled])`),d=u[0],g=u[u.length-1],m=this.getDaysInMonth(s,e),p=this.normalizeDate(`${e}-${s}-${i}`);let f=a.querySelector(`[data-jetdate-date="${p}"]`);if("ArrowUp"===t.key&&n===d)f=a.querySelector("button:not([disabled])");else if("ArrowDown"===t.key&&n===g)f=a.querySelector("button:last-child");else if("ArrowLeft"===t.key&&i<1){if(o===l)return this.previousHandler();f=a.previousSibling.querySelector("button:last-child")}else if("ArrowRight"===t.key&&i>m){if(o===h)return this.nextHandler();f=a.nextSibling.querySelector("button")}n.tabIndex=-1,f.tabIndex=0,f.focus()}keyEnterHandler(t){const e=new PointerEvent("click");t.dispatchEvent(e)}reset(){this.selectedValues=[];const t=this.getStartDate(),e=this.getResult();this.goToMonthYear(t),this.cleanInput(),this.setDaysState(),this.enableClearButton(),this.createCustomEvent("onReset",{result:e}),this.config.onReset(e),this.createCustomEvent("onChange",{result:e}),this.config.onChange(e)}getResult(){return this.names.reduce(((t,e,s)=>(t[e]=this.selectedValues[s]?[this.selectedValues[s]]:void 0,t)),{})}updateMonth(t){return(t%12+12)%12||12}updateYear(t,e){return e+=Math.floor((t-1)/12),t=(t-1)%12+1,e}normalizeDate(t){return t.split("-").map((t=>t.padStart(2,"0"))).join("-")}convertToISODate(t){const{locale:e,inputFormat:s}=this.config;let i=t.replace(/[^a-zA-ZÀ-ÖØ-öø-ÿ0-9]+/g," ").split(" "),n="";if("numeric"!==s.month||"2-digit"===!s.month){const t=this.createMonthsMap(e,s.month);n=Object.values(t).find((t=>i.includes(t.toLowerCase()))),n=n?n[0]:null}return i=i.join(" ").replace(/[\p{L}]/gu,"").replace(/^\s+|\s+$|\s+(?=\s)/g,"").split(" "),n&&i.splice(-1,0,n),i=this.getDateParts(i,e,s),this.normalizeDate(`${i.year||""}-${i.month||""}-${i.day||""}`)}getDateParts(t,e,s){const i=new Intl.DateTimeFormat(e,s).formatToParts().filter((t=>"weekday"!==t.type&&"literal"!==t.type)),n={};return i.forEach(((e,s)=>n[e.type]=t[s])),n}formatLocaleDate(t,e={}){return t=new Date(`${t}T00:00:00`),new Intl.DateTimeFormat(this.config.locale,e).format(t)}getToday(){const t=new Intl.DateTimeFormat(this.config.locale).formatToParts().reduce(((t,e)=>"literal"!==e.type?{...t,[e.type]:e.value}:t),{});return`${t.year}-${t.month}-${t.day}`}getFirstMonthDay(t,e){const s=new Date(e,t-1,2);return 0===s.getDay()?7:s.getDay()}getDaysInMonth(t,e){return new Date(e,t,0).getDate()}set(t=this.config.set){t&&Object.keys(t)[0]&&(this.selectedValues=this.getSelectedValues(t),this.fillInput(),this.setDaysState(),this.enableClearButton())}getSelectedValues(t){return this.names.map((e=>t[e]))}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s)),this.matchMediaHandler(o,s)}))}matchMediaHandler(t,e){t.matches&&(this.config={...this.config,...e})}}class y extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.element=this.getElement(this.config.element),this.input=this.getElement("[data-jetinput-input]",this.element),this.clear=this.getElement(this.config.clear,this.element),this.names=this.stringToArray(this.config.name),this.aria=this.config.aria,this.selectedValues=[],this.delete=!1,this.init()}mergeOptions(t){const e={element:"",clear:"",name:"",aria:this.getAria(),attributes:{},multiple:!1,limit:0,format:t=>t,set:{},breakpoints:{},onClear:(t,e)=>{},onFocus:t=>{},onInput:(t,e)=>{},onKeyDown:(t,e)=>{},onKeyUp:(t,e)=>{},onKeyEnter:(t,e)=>{},onChange:t=>{},onBlur:(t,e)=>{},onLimit:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setInput(),this.setClearButton(),this.set())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}stringToArray(t){return"string"==typeof t?[t]:t}getAria(){return{input:{"aria-label":"Input"},clear:{"aria-label":"Limpar input"}}}setInput(){const t=this.input.getAttribute("aria-label")||this.aria.input["aria-label"];this.input.setAttribute("aria-label",t),this.setInputAttributes(),this.inputEvents()}setInputAttributes(){Object.entries(this.config.attributes).forEach((([t,e])=>{"value"===t&&this.setValue(e),this.input.setAttribute(t,e)}))}inputEvents(){this.input.onfocus=this.focusHandler.bind(this),this.input.addEventListener("input",this.inputHandler.bind(this)),this.input.onkeydown=this.keydownHandler.bind(this),this.input.onkeyup=this.keyupHandler.bind(this),this.input.onblur=this.blurHandler.bind(this)}focusHandler(t){const e=this.getResult();this.createCustomEvent("onFocus",{event:t}),this.config.onFocus(e,t)}inputHandler(t){const e=this.getResult();this.enableClearButton(),this.createCustomEvent("onInput",{result:e,event:t}),this.config.onInput(e,t)}keydownHandler(t){const e=this.getResult();switch(t.key){case"Enter":this.createCustomEvent("onKeyEnter",{result:e,event:t}),this.config.onKeyEnter(e,t);break;case"Backspace":case"Delete":this.delete=!0;break;default:this.delete=!1}this.createCustomEvent("onKeyDown",{result:e,event:t}),this.config.onKeyDown(e,t)}keyupHandler(t){this.setSelectedValues(t.target.value);const e=this.getResult();this.setInputValue(),this.createCustomEvent("onKeyUp",{result:e,event:t}),this.config.onKeyUp(e,t),this.createCustomEvent("onChange",{result:e}),this.config.onChange(e)}blurHandler(t){const e=this.getResult();this.createCustomEvent("onBlur",{result:e,event:t}),this.config.onBlur(e,t)}setSelectedValues(t){t=(t=Array.isArray(t)?t.join(", "):t)?this.getValues(t):[],this.selectedValues=this.formatValues(t)}getValues(t){const e=this.names[1]?this.names.length:this.config.limit;return(this.names[1]||this.config.multiple)&&(t=t.split(","),t=this.trimArray(t),t=this.delete?t.filter(Boolean):t),e&&t.length>e&&(t=t.splice(0,e),this.createCustomEvent("onLimit",{limit:e}),this.config.onLimit(e)),this.config.multiple?t:[t]}trimArray(t){if(Array.isArray(t))return t.map((t=>t&&t.toString().replace(/^\s+/g,"")))}formatValues(t){return t.map((t=>this.config.format(t)))}setInputValue(){this.input.value=this.selectedValues.flat().join(", ")}setClearButton(){if(!this.clear)return;const t=this.clear.getAttribute("aria-label")||this.aria.clear["aria-label"];this.clear.type="button",this.clear.setAttribute("aria-label",t),this.clear.onclick=this.clearButtonHandler.bind(this),this.setInputAttributes(),this.inputEvents()}clearButtonHandler(t){this.setValue("");const e=this.getResult();this.input.focus(),this.createCustomEvent("onClear",{result:e,event:t}),this.config.onClear(e,t),this.createCustomEvent("onChange",{result:e}),this.config.onChange(e)}enableClearButton(){this.clear&&this.config.clear&&this.clear.classList.toggle("is-enabled",this.input.value)}getResult(){const t=this.arrayValueToArray(this.selectedValues),e=this.unzipArrays(t),s={};return this.names.forEach(((t,i)=>{const n=this.trimArray(e[i]);s[t]=["[[undefined]]",'[""]'].includes(JSON.stringify(n))?void 0:n})),s}arrayValueToArray(t){return t.map((t=>this.stringToArray(t)))}unzipArrays(t){const e=Math.max(...t.map((t=>t.length)));return Array.from({length:e},((e,s)=>t.map((t=>t[s]))))}set(t=this.config.set){t&&Object.keys(t)[0]&&(t=(t=this.getSelectedValues(t)).flat().filter(Boolean),this.setValue(t))}getSelectedValues(t){const e=this.names.map((e=>this.valueToArray(t[e])));return this.names[1]?this.zipArrays(e):e}valueToArray(t){return Array.isArray(t)?t:[t]}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}setValue(t){this.setSelectedValues(t),this.setInputValue(),this.enableClearButton()}setFocus(){this.input.focus()}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setInputAttributes(),this.set()}}class E extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.slider=this.getElement("[data-jetrange-slider]",this.element),this.minRange=this.getElement('[data-jetrange-input-range="min"]',this.element),this.maxRange=this.getElement('[data-jetrange-input-range="max"]',this.element),this.range=this.getElement("[data-jetrange-range]",this.element),this.classes=this.config.classes,this.baseClass=this.constructor.name.toLowerCase(),this.names=this.stringToArray(this.config.name),this.minValue=this.config.data?this.config.data[0][this.config.minKey]:0,this.maxValue=this.config.data?this.config.data[0][this.config.maxKey]:100,this.isMultiple=this.names[1],this.valuesTypes=this.getValuesTypes(),this.selectedValues={},this.init()}mergeOptions(t){const e={element:"",name:"",classes:this.getClasses(t),step:1,label:!1,labelStep:1,labelMarker:!1,labelMarkerStep:5,labelFormat:t=>t,tooltip:!1,tooltipFormat:t=>t,data:[],minKey:"",maxKey:"",set:{},breakpoints:{},onChange:t=>{},onSlideStart:(t,e)=>{},onSlide:(t,e)=>{},onSlideEnd:(t,e)=>{},onDelete:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.createRangeSlider(),this.set())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{tooltip:`${i}tooltip`,label:`${i}label`,marker:`${i}marker`,line:`${i}line`,value:`${i}value`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}stringToArray(t){return Array.isArray(t)?t:[t]}getValuesTypes(){return this.isMultiple?["min","max"]:["max"]}createRangeSlider(){const t=new DocumentFragment;this.valuesTypes.forEach((t=>{this.config.tooltip&&this.slider.append(this.createTooltip(t)),this.setInputAttributes(t),this.inputEvent(t),setTimeout(this.updateRangeSlider.bind(this,t),150)})),this.sliderEvent(),t.append(this.slider),this.config.label&&t.append(this.createLabel()),this.element.append(t)}sliderEvent(){this.slider.onclick=this.sliderHandler.bind(this)}sliderHandler(t){const e=(t.clientX-this.slider.getBoundingClientRect().left)/this.slider.offsetWidth*100/100*this.maxValue,s=this.getClosestThumb(e);this[`${s}Range`].value=e,this[`${s}Range`].focus();const i=this.getResult();this.updateRangeSlider(s),this.createCustomEvent("onChange",{result:i}),this.config.onChange(i)}getClosestThumb(t){if(!this.isMultiple)return"max";return Math.abs(this.minRange.value-t)>Math.abs(this.maxRange.value-t)?"max":"min"}delete(){this.names.forEach((t=>{this.selectedValues[t]=[]})),this.isMultiple&&(this.minRange.value=this.minValue,this.updateRangeSlider("min")),this.maxRange.value=this.maxValue,this.updateRangeSlider("max");const t=this.getResult();this.createCustomEvent("onDelete",{result:t}),this.config.onDelete(t),this.createCustomEvent("onChange",{result:t}),this.config.onChange(t)}setInputAttributes(t){this[`${t}Range`].min=this.minValue,this[`${t}Range`].max=this.maxValue,this[`${t}Range`].step=this.config.step,this[`${t}Range`].value="min"===t?this.minValue:this.maxValue}inputEvent(t){this[`${t}Range`].onpointerdown=this.slideStartHandler.bind(this),this[`${t}Range`].oninput=this.inputHandler.bind(this,t),this[`${t}Range`].onpointerup=this.slideEndHandler.bind(this)}slideStartHandler(){const t=this.getResult();this.createCustomEvent("onSlideStart",{result:t,event}),this.config.onSlideStart(t,event)}slideEndHandler(){const t=this.getResult();this.createCustomEvent("onSlideEnd",{result:t,event}),this.config.onSlideEnd(t,event)}inputHandler(t){const e=this.getResult();this.updateRangeSlider(t),this.createCustomEvent("onSlide",{result:e,event}),this.config.onSlide(e,event),this.createCustomEvent("onChange",{result:e}),this.config.onChange(e)}updateRangeSlider(t){const e=this[`${t}Range`];if(this.isMultiple){const s=this.getRangeLimit(t);this.checkRangeLimit(t,e.value,s)||(e.value=s)}this.setRange(t),this.setRangeAria(t),this.setTooltip(t)}setRangeAria(t){const e=this[`${t}Range`];this.isMultiple&&("min"===t?(e.setAttribute("aria-valuemin",this.minValue),this.maxRange.setAttribute("aria-valuemin",e.value),e.setAttribute("aria-valuemax",this.maxRange.value)):(e.setAttribute("aria-valuemax",this.maxValue),e.setAttribute("aria-valuemin",this.minRange.value),this.minRange.setAttribute("aria-valuemax",this.maxRange.value))),e.setAttribute("aria-valuenow",e.value),e.setAttribute("aria-valuetext",e.value),e.setAttribute("aria-orientation","horizontal")}getRangeLimit(t){const e="min"===t?this.maxRange:this.minRange,s=Number(e.value),i=Number(this.config.step);return"min"===t?s-i:s+i}checkRangeLimit(t,e,s){return"min"===t?e<=s:e>=s}setRange(t){const e=this[`${t}Range`],{value:s,offsetWidth:i}=e,n=this.getThumbWidth(e),a="min"===t?"left":"right";let o=(s-this.minValue)/(this.maxValue-this.minValue)*(i-n);o="min"===t?o:i-(o+n),this.range.style[a]=`${o}px`}getThumbWidth(t){const e=getComputedStyle(t);return parseInt(e.getPropertyValue(`--${this.baseClass}-thumb-width`))}createTooltip(t){return this[`${t}Tooltip`]=document.createElement("output"),this[`${t}Tooltip`].className=this.classes.tooltip,this[`${t}Tooltip`].className+=` ${this.classes.tooltip}-${t}`,this[`${t}Tooltip`].dataset.jetrangeTooltip=t,this[`${t}Tooltip`]}setTooltip(t){if(!this.config.tooltip)return;const e=this[`${t}Range`];let{value:s,min:i,max:n,offsetWidth:a}=e;const o=(s-i)/(n-i)*(a-this.getThumbWidth(e));s=this.config.tooltipFormat(s),this[`${t}Tooltip`].style.left=`${o}px`,this[`${t}Tooltip`].innerHTML=s}createLabel(){const t=new DocumentFragment,e=document.createElement("div"),s=this.maxValue-this.minValue;return e.className=this.classes.label,e.dataset.jetrangeLabel="",this.config.labelMarker&&e.append(this.createLabelMarker(s)),e.append(this.createLabelValue(s)),t.append(e),t}createLabelMarker(t){const e=new DocumentFragment,s=t/this.config.labelMarkerStep;for(let t=0;t<=s;t++){const t=document.createElement("div");t.className=this.classes.marker,t.dataset.jetrangeMarker="",e.append(t)}return e}createLabelValue(t){const e=new DocumentFragment;for(let s=0;s<=this.config.labelStep;s++){const i=document.createElement("div"),n=document.createElement("label");let a=t/this.config.labelStep,o=(a-this.minValue)/(this.maxValue-this.minValue)*100;o=+this.minValue+o*s,a=+this.minValue+a*s,a=a.toFixed(1).replace(".0",""),a=this.config.labelFormat(a),i.className=this.classes.line,i.dataset.jetrangeLine="",n.className=this.classes.value,n.dataset.jetrangeValue="",n.style.left=`${o}%`,n.innerHTML=a,n.append(i),e.append(n)}return e}getResult(){return this.valuesTypes.forEach(((t,e)=>{this.selectedValues[this.names[e]]=[this[`${t}Range`].value]})),this.selectedValues}set(t=this.config.set){if(!t||!Object.keys(t)[0])return;const e=[this.minValue,this.maxValue];this.selectedValues=t,this.valuesTypes.forEach(((t,s)=>{const i=this.names[s],n=this.selectedValues[i]||e[this.isMultiple?s:1];this[`${t}Range`].value=n,this.updateRangeSlider(t)}))}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){}}class x extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.button=this.getElement("[data-jetselect-button]",this.element),this.label=this.getElement("[data-jetselect-label]",this.element),this.icon=this.getElement("[data-jetselect-icon]",this.element),this.box=this.getElement("[data-jetselect-box]",this.element),this.list=this.getElement("[data-jetselect-list]",this.element),this.names=this.valueToArray(this.config.name),this.classes=this.config.classes,this.baseId=this.getBaseId(),this.aria=this.config.aria,this.toggle=this.setToggle(),this.data=this.setData(),this.selected=[],this.activeIndex=-1,this.init()}mergeOptions(t){const e={element:"",name:"",classes:this.getClasses(t),aria:this.getAria(),label:"",deselectAll:"",multiple:!1,limit:!1,toggle:!1,autoHeight:!0,autoPosition:!0,scrollbar:!1,tags:!1,checkmark:!1,groupOption:!1,groupCheckmark:!1,groupTotal:!1,data:[],textKey:"",valueKey:"",counterKey:"",groupKey:"",set:{},breakpoints:{},onOpen:()=>{},onClose:()=>{},onClick:t=>{},onChange:t=>{},onDeselectAll:t=>{},onLimit:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setElement(),this.setButton(),this.setIcon(),this.setLabelValue(),this.setList(),this.set())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}valueToArray(t){return Array.isArray(t)?t:[t]}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{option:`${i}option`,text:`${i}text`,counter:`${i}counter`,group:`${i}group`,name:`${i}name`,total:`${i}total`,checkmark:`${i}checkmark`,tag:`${i}tag`,"tag-text":`${i}tag-text`,"tag-delete":`${i}tag-delete`,highlight:`${i}highlight`,"not-found":`${i}not-found`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getBaseId(){const t=[...document.querySelectorAll("[data-jetselect]")].indexOf(this.element);return this.element.id||`jetselect-${t}`}getAria(){return{tag:{"aria-label":"Remover"}}}setToggle(){return this.config.multiple||this.config.toggle}setData(){const{data:t,textKey:e,valueKey:s,groupKey:i,counterKey:n,groupOption:a}=this.config,o=this.groupArrayByKey(t,i);return Object.entries(o).flatMap((([t,r])=>{if(i){const l=this.names.map((e=>e===a?t:"")),h=this.getGroupTotal(o[t]);return[{[e]:t,[s]:l,[i]:t,[n]:h,isGroup:!0},...r]}return r}))}groupArrayByKey(t,e){return t.reduce(((t,s)=>(t[s[e]]=[...t[s[e]]||[],s],t)),{})}getGroupTotal(t){return t.reduce(((t,e)=>t+e[this.config.counterKey]),0)}setElement(){this.element.className+=this.config.data[0]?"":" is-disabled"}setButton(){this.button.type="button",this.button.setAttribute("role","combobox"),this.button.setAttribute("aria-haspopup","listbox"),this.button.setAttribute("aria-controls",this.baseId),this.button.setAttribute("aria-expanded",!1),this.button.disabled=!this.config.data[0],this.button.onclick=this.buttonHandler.bind(this),this.button.onkeydown=this.keydownHandler.bind(this)}buttonHandler(t){t.preventDefault(),this.opened?this.close():this.open()}open(){this.opened||(this.clickOutsideHandler=this.clickOutside.bind(this),this.resizeHandler=this.resize.bind(this),window.addEventListener("pointerdown",this.clickOutsideHandler),window.addEventListener("resize",this.resizeHandler),this.createList(),this.restoreOptionFocus(),this.restoreOptionsState(),this.managePageScrollBar(!1),this.setDropdownState(!0),this.resize(),this.createCustomEvent("onOpen"),this.config.onOpen())}restoreOptionFocus(){const t=this.selected[0],e=[...this.list.querySelectorAll("li[aria-selected]")],s=this.list.querySelector("li[role]"),i=e[this.data.findIndex((e=>e===t))]||s;this.setFocus(i)}restoreOptionsState(){this.selected.forEach((t=>this.setOptionState(t,!0)))}close(){this.opened&&(window.removeEventListener("pointerdown",this.clickOutsideHandler),window.removeEventListener("resize",this.resizeHandler),this.managePageScrollBar(!0),this.setDropdownState(!1),this.createCustomEvent("onClose"),this.config.onClose())}clickOutside(t){this.element.contains(t.target)||(this.displaySelectedValues(),this.close())}managePageScrollBar(t){if(this.config.scrollbar)return;const{body:e}=document,s=window.innerWidth-e.clientWidth,i=this.baseId.replace("-","-scrollbar-"),n=[...e.classList].filter((t=>t.includes("-scrollbar-"))).length;return!t&&n?e.classList.add(i):t&&n>1?e.classList.remove(i):(e.classList.toggle(i,!t),e.style.overflow=t?"":"hidden",void(e.style.paddingRight=t?"":`${s}px`))}setDropdownState(t){const e=this.getTransitionType(this.box);this.opened=t,this.box.dataset.jetselectBox="opened",setTimeout((()=>this.box.classList.toggle("is-opened",t))),this.element.classList.toggle("is-opened",t),this.button.setAttribute("aria-expanded",t),this.button.focus(),this.manageBoxTransition(t,e)}manageBoxTransition(t,e){this.box.removeEventListener(`${e}end`,this.transitionEndHandler),!t&&e?(this.transitionEndHandler=this.hideBox.bind(this,e),this.box.addEventListener(`${e}end`,this.transitionEndHandler)):t||this.hideBox()}resize(){this.config.autoPosition&&(this.box.classList.toggle("is-opened-up",this.shouldOpenUp()),this.box.classList.toggle("is-opened-down",!this.shouldOpenUp())),this.config.autoHeight&&(this.box.style.maxHeight=this.setBoxHeight()||"")}shouldOpenUp(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=t-s;return e>n&&i>n}setBoxHeight(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=this.shouldOpenUp()?e:t-s;return n<i&&`${n}px`}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}hideBox(t){this.box.dataset.jetselectBox="",this.box.removeAttribute("style"),this.list.innerHTML="",t&&this.box.removeEventListener(`${t}end`,this.transitionEndHandler)}keydownHandler(t){switch(t.key){case"Home":case"End":case"ArrowUp":case"ArrowDown":return this.open(),this.setFocusByArrow(t);case"Enter":case" ":return this.keyEnterHandler();case"Escape":case"Tab":return this.close()}}setFocusByArrow(t){const e=this.list.querySelectorAll("li[role]"),s=e.length-1,i=this.getFocusIndex(t,this.activeIndex,s);this.maintainScrollVisibility(e[i],this.list),this.setFocus(e[i])}getFocusIndex(t,e,s){switch(t.key){case"Home":return 0;case"End":return s;case"ArrowUp":return Math.max(0,e-1);case"ArrowDown":return Math.min(s,e+1)}}setFocus(t){const e=[...this.list.querySelectorAll("li[role]")],s=this.list.querySelector(".is-focused");this.activeIndex=e.indexOf(t),this.label.setAttribute("aria-activedescendant",t.id),s&&s.classList.remove("is-focused"),t.classList.add("is-focused")}maintainScrollVisibility(t,e){const{offsetHeight:s,offsetTop:i}=t,{offsetHeight:n,scrollTop:a}=e,o=i+s>a+n;i<a?e.scrollTo(0,i-e.offsetTop):o&&e.scrollTo(0,i-n+s)}keyEnterHandler(){const t=this.list.querySelector(".is-focused"),e=new PointerEvent("click");t&&t.dispatchEvent(e)}setIcon(){this.icon&&this.icon.setAttribute("aria-hidden",!0)}setList(){this.list.id=this.baseId,this.list.setAttribute("role","listbox"),this.config.multiple&&this.list.setAttribute("aria-multiselectable",!0)}createList(){const t=new DocumentFragment;this.data.forEach(((e,s)=>{const i=e.isGroup?this.createGroup(e,s):this.createOption(e,s);t.append(i)})),this.config.deselectAll&&t.prepend(this.createDeselect()),this.list.append(t)}createDeselect(){const t=document.createElement("li"),e=this.createDeselectText();return t.className=`${this.classes.option} ${this.classes.option}--deselect`,t.id=`${this.baseId}-deselect`,t.dataset.jetselectOption="",t.setAttribute("role","option"),t.onmouseover=this.setFocus.bind(this,t),t.onclick=this.deselectHandler.bind(this),t.append(e),t}createDeselectText(){const t=document.createElement("span");return t.className=this.classes.text,t.dataset.jetselectText="",t.innerHTML=this.config.deselectAll,t}deselectHandler(){this.deselectAll();const t=this.getResult();this.createCustomEvent("onDeselectAll",t),this.config.onDeselectAll(t)}createGroup(t,e){const{valueKey:s,groupKey:i,counterKey:n,groupOption:a,groupCheckmark:o,groupTotal:r}=this.config,l=t[i],h=document.createElement("li"),c=this.createGroupText(l),u=t[n];if(h.className=this.classes.group,h.id=`${this.baseId}-group-${e}`,h.dataset.jetselectGroup="",h.dataset.jetselectGroupName=l,a){const e=this.createCheckmark(o,t[s]);h.setAttribute("role","option"),h.setAttribute("aria-selected",!1),h.onmouseover=this.setFocus.bind(this,h),h.onclick=this.groupHandler.bind(this,t),h.append(e)}if(h.append(c),r){const t=this.createCounter("total",u);h.append(t)}return h}createGroupText(t){const e=document.createElement("span");return e.className=this.classes.name,e.dataset.jetselectName="",e.innerHTML=t,e}groupHandler(t){this.config.multiple&&(this.checkSelectAll(t)?this.deselectAll(t):this.selectAll(t))}createOption(t,e){const{checkmark:s,valueKey:i,groupKey:n,counterKey:a}=this.config,o=document.createElement("li"),r=this.createOptionText(t),l=this.createCheckmark(s,t[i]);if(o.className=this.classes.option,o.id=`${this.baseId}-option-${e}`,o.dataset.jetselectOption="",n&&(o.dataset.jetselectGroupName=t[n]),o.setAttribute("role","option"),o.setAttribute("aria-selected","false"),o.onmouseover=this.setFocus.bind(this,o),o.onclick=this.optionHandler.bind(this,t),o.append(l,r),t[a]){const e=this.createCounter("counter",t[a]);o.append(e)}return o}createOptionText(t){const{textKey:e}=this.config,s=document.createElement("span");return s.className=this.classes.text,s.dataset.jetselectText="",s.innerHTML=t[e],s}optionHandler(t){if(!this.toggle&&this.selected.includes(t))return;this.selectOption(t),this.setOptionState(t,this.selected.includes(t)),this.updateGroup(),this.displaySelectedValues(),!this.config.multiple&&this.close(),this.button.focus();const e=this.getResult();this.createCustomEvent("onClick",e),this.config.onClick(e),this.createCustomEvent("onChange",e),this.config.onChange(e)}displaySelectedValues(){this.createTags(),this.setLabelValue()}createTags(){if(!this.config.tags)return;const t=new DocumentFragment,e=this.getGroupedSelectedValues();this.removeTags(),e.forEach((e=>{t.append(this.createTag(e))})),this.label.before(t)}getGroupedSelectedValues(){const{groupKey:t,groupOption:e}=this.config,s=[...this.selected];if(this.names.includes(e)){const e=s.flatMap((e=>e.isGroup?e[t]:[]));return s.filter((s=>!e.includes(s[t])||s.isGroup))}return s}removeTags(){document.querySelectorAll("[data-jetselect-tag]").forEach((t=>t.remove()))}createTag(t){const e=document.createElement("button"),s=this.createTagText(t),i=this.createTagIcon();return e.className=this.classes.tag,e.dataset.jetselectTag="",e.type="button",e.setAttribute("aria-label",this.aria.tag["aria-label"]),e.onclick=this.tagHandler.bind(this,t),e.append(s,i),e}createTagText(t){const e=document.createElement("span");return e.className=this.classes["tag-text"],e.innerHTML=t[this.config.textKey],e}createTagIcon(){const t=document.createElement("div");return t.className=this.classes["tag-delete"],t.dataset.jetselectTagDelete="",t.setAttribute("aria-hidden",!0),t}tagHandler(t){event.stopPropagation(),t.isGroup?this.groupHandler(t):this.optionHandler(t)}setLabelValue(){const{label:t,tags:e,textKey:s}=this.config;if(e&&this.selected[0])return this.label.innerHTML="";if(!this.selected[0])return this.label.innerHTML=t;const i=this.getGroupedSelectedValues().map((t=>t[s]));this.label.innerHTML=i.join(", ")}checkSelectAll(t){const{data:e,groupKey:s}=this.config;return e.filter((e=>t[s]===e[s])).every((t=>this.selected.includes(t)))}selectAll(t){const{data:e,groupKey:s,multiple:i}=this.config;e.forEach((e=>{e[s]!==t[s]||this.selected.includes(e)||(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup(),this.displaySelectedValues(),!i&&this.close();const n=this.getResult();this.createCustomEvent("onChange",n),this.config.onChange(n)}deselectAll(t){const{groupKey:e}=this.config,s=[...this.selected];s.forEach((i=>{(!t||i[e]===t[e]&&s.includes(i))&&(this.selectOption(i),this.setOptionState(i,!1))})),this.updateGroup(),this.displaySelectedValues();const i=this.getResult();this.createCustomEvent("onChange",i),this.config.onChange(i)}updateGroup(){const{groupOption:t}=this.config;t&&this.data.filter((t=>t.isGroup)).forEach((e=>{const s=this.checkSelectAll(e),i=this.selected.includes(e);this.names.includes(t)&&s!==i&&this.selectOption(e),this.setOptionState(e,s)}))}selectOption(t){const{limit:e,multiple:s}=this.config,i=this.selected.indexOf(t),n=this.toggle&&i>-1,a=!s&&t===this.selected[0];if(this.selected.length===e&&!n)return this.createCustomEvent("onLimit",e),this.config.onLimit(e);s||(this.selected=[]),n||a?this.selected.splice(i,1):this.selected.push(t)}setOptionState(t,e){const s=this.list.querySelectorAll("[data-jetselect-group], [aria-selected]")[this.data.indexOf(t)];if(!s)return;const i=s.querySelector("input");s.setAttribute("aria-selected",e),s.classList.toggle("is-active",e),i&&(i.checked=e)}createCheckmark(t,e){const s=document.createElement("input");return s.className=this.classes.checkmark,s.dataset.jetselectCheckmark="",s.type="checkbox",s.name=this.baseId,s.value=e,s.tabIndex=-1,s.hidden=!t,s}createCounter(t,e){const s=document.createElement("output"),i=`${t[0].toUpperCase()}${t.slice(1)}`;return s.className=this.classes[t],s.dataset[`jetselect${i}`]="",s.innerHTML=e,s}getResult(){const{valueKey:t,groupKey:e}=this.config,s=this.selected[0]?{}:Object.fromEntries(this.names.map((t=>[t,void 0]))),i=this.selected.flatMap((t=>t.isGroup?t[e]:[])),n=this.selected.flatMap((s=>!i.includes(s[e])||s.isGroup?[s[t]]:[])),a=this.names[1]?this.unzipArrays(n):n[0]?[n]:n;return this.names.forEach(((t,e)=>s[t]=a[e])),s}unzipArrays(t){const e=Math.max(...t.map((t=>t.length)));return Array.from({length:e},((e,s)=>t.map((t=>t[s]))))}add(t,e=0){this.config.data.splice(e,0,...t),this.setData()}remove(t=this.config.data){this.config.data=this.config.data.filter((e=>!this.arrayIncludeArray(t,e))),this.setData()}set(t=this.config.set){if(!t||!Object.keys(t)[0])return;const{data:e,valueKey:s}=this.config,i=[...this.selected];t=this.getSelectedValues(t),e.forEach((e=>{i.includes(e)&&(this.selectOption(e),this.setOptionState(e,!1)),this.arrayIncludeArray(t,e[s])&&(this.selectOption(e),this.setOptionState(e,!0))})),this.updateGroup(),this.displaySelectedValues()}getSelectedValues(t){const{data:e,valueKey:s,groupKey:i,groupOption:n}=this.config;if(t=this.names.map((e=>this.valueToArray(t[e]))),t=this.names[1]?this.zipArrays(t):t,this.names.includes(n)){const n=t.filter((t=>!t.filter(Boolean)[1])).map((t=>t.filter(Boolean)[0]));e.forEach((e=>{n.includes(e[i])&&t.push(e[s])}))}return t}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}arrayIncludeArray(t,e){return t=JSON.stringify(t,this.normalizeValues),e=JSON.stringify(e,this.normalizeValues),t.includes(e)}normalizeValues(t,e){return null===(e="number"==typeof e?`${e}`:e)?"":e}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setData(),this.setLabelValue(),this.removeTags(),this.createTags()}}class A extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.element=this.getElement(this.config.element),this.previousButton=this.getElement(this.config.previous,this.element),this.input=this.getElement("[data-jetstep-input]",this.element),this.nextButton=this.getElement(this.config.next,this.element),this.names=this.valueToArray(this.config.name),this.aria=this.config.aria,this.data=this.setData(),this.selected=[],this.activeIndex=0,this.init()}mergeOptions(t){const e={element:"",previous:"",next:"",name:"",aria:this.getAria(),deselectAll:"",data:[],textKey:"",valueKey:"",loop:!1,set:{},breakpoints:{},onClick:t=>{},onChange:t=>{},onDeselectAll:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setElement(),this.setInput(),this.setPreviousButton(),this.setInputValue(),this.setNextButton(),this.set(),this.buttonState())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}valueToArray(t){return Array.isArray(t)?t:[t]}getAria(){return{previous:{"aria-label":"Valor anterior"},next:{"aria-label":"Próximo valor"}}}setData(){const{deselectAll:t,textKey:e,valueKey:s}=this.config;let i=[...this.config.data];return!1!==t&&(i=[{[e]:t,[s]:[]},...i]),i}setElement(){this.element.className+=this.config.data[0]?"":" is-disabled"}setInput(){this.input.tabIndex="-1",this.input.readOnly=!0}setPreviousButton(){if(!this.previousButton)return;const t=this.previousButton.getAttribute("aria-label")||this.aria.previous["aria-label"];this.previousButton.type="button",this.previousButton.setAttribute("aria-label",t),this.previousButton.onclick=this.previous.bind(this)}previous(){const{loop:t}=this.config;if(!t&&this.activeIndex<=0)return;const e=this.data.length-1,s=this.activeIndex-1;this.activeIndex=t&&0===this.activeIndex?e:s,this.selectOption(this.activeIndex);const i=this.getResult();this.createCustomEvent("onClick",{result:i}),this.config.onClick(i),this.createCustomEvent("onChange",{result:i}),this.config.onChange(i)}setNextButton(){if(!this.nextButton)return;const t=this.nextButton.getAttribute("aria-label")||this.aria.next["aria-label"];this.nextButton.type="button",this.nextButton.setAttribute("aria-label",t),this.nextButton.onclick=this.next.bind(this)}next(){const{loop:t,deselectAll:e}=this.config;if(!t&&this.activeIndex>=this.data.length-1)return;const s=this.data.length-1,i=!1!==e||this.selected[0]?this.activeIndex+1:this.activeIndex;this.activeIndex=t&&this.activeIndex===s?0:i,this.selectOption(this.activeIndex);const n=this.getResult();this.createCustomEvent("onClick",{result:n}),this.config.onClick(n),this.createCustomEvent("onChange",{result:n}),this.config.onChange(n)}buttonState(){if(this.config.loop)return;const t=this.activeIndex,e=this.data.length-1;this.previousButton&&(this.previousButton.disabled=t<=0,this.previousButton.classList.toggle("is-disabled",t<=0)),this.nextButton&&(this.nextButton.disabled=t===e,this.nextButton.classList.toggle("is-disabled",t===e))}deselectAll(){this.activeIndex=0,!1===this.config.deselectAll?(this.selected=[],this.setInputValue()):this.selectOption(this.activeIndex);const t=this.getResult();this.createCustomEvent("onDeselectAll",{result:t}),this.config.onDeselectAll(t),this.createCustomEvent("onChange",{result:t}),this.config.onChange(t)}selectOption(t){const{textKey:e,valueKey:s}=this.config,i=this.data[t][e].toString(),n=this.data[t][s];this.selected=n?[n]:[],this.setInputValue(i),this.buttonState()}setInputValue(t){const{deselectAll:e}=this.config;if(!1===e&&!this.selected[0])return this.input.value="";this.input.value=t||e}getResult(){const t=this.arrayValueToArray(this.selected),e=this.unzipArrays(t),s={};return this.names.forEach(((t,i)=>s[t]=e[i])),s}arrayValueToArray(t){return t.map((t=>this.valueToArray(t)))}unzipArrays(t){const e=Math.max(...t.map((t=>t.length)));return Array.from({length:e},((e,s)=>t.map((t=>t[s]))))}add(t,e=0){this.config.data.splice(e,0,...t),this.activeIndex=0,this.selectOption(this.activeIndex),this.setData(),this.buttonState()}remove(t=this.config.data){this.config.data=this.config.data.filter((e=>!this.arrayIncludeArray(t,e))),this.activeIndex=0,this.selectOption(this.activeIndex),this.setData(),this.buttonState()}set(t=this.config.set){t&&Object.keys(t)[0]&&(t=this.getSelectedValues(t),this.data.forEach(((e,s)=>{const i=this.valueToArray(e[this.config.valueKey]);this.activeIndex=this.arrayIncludeArray(t,i)?s:0,this.selectOption(this.activeIndex)})))}getSelectedValues(t){const e=this.names.map((e=>this.valueToArray(t[e])));return this.names[1]?this.zipArrays(e):e}zipArrays(t){return Array.from({length:Math.max(...t.map((t=>t.length)))},((e,s)=>t.map((t=>t[s]))))}arrayIncludeArray(t,e){return t=JSON.stringify(t,this.normalizeValues),e=JSON.stringify(e,this.normalizeValues),t.includes(e)}normalizeValues(t,e){return null===(e="number"==typeof e?e.toString():e)?"":e}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setData(),this.set(),this.setInputValue(),this.buttonState()}}class S{constructor(t){this.config=this.mergeOptions(t),this.container=this.getElement(this.config.container),this.newContainer,this.init()}mergeOptions(t){return{container:"",newContainer:!1,elements:{},firstLoad:!0,once:!1,onceEnd:!1,enter:!1,enterEnd:!1,leave:!1,leaveEnd:!1,...t}}init(){this.setStages(),this.runTransitions(),this.createNewContainer()}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}setStages(){const{once:t,onceEnd:e,enter:s,enterEnd:i,leave:n,leaveEnd:a}=this.config;this.onceStages=[t,e],this.stages=[s,i,n,a]}runTransitions(t=0){const e=this.config.firstLoad?this.onceStages:this.stages,s=[this.createPromises(e,t)];Promise.all(s).then((()=>{t<e.length-1?(t++,this.runTransitions(t)):this.config.firstLoad?this.config.firstLoad=!1:this.removeContainer()}))}createPromises(t,e){const s=t[e],i=this.getElements();return new Promise((t=>{s?s(i,t):t()}))}getElements(){const t={...this.config.elements};this.config.container&&(t.container=this.config.container);for(const e in t){const s=this.getElement(t[e]);s?t[e]=s:delete t[e]}return this.newContainer&&(t.newContainer=this.newContainer),t}removeContainer(){this.newContainer&&this.container.remove()}createNewContainer(){this.config.newContainer&&!this.config.firstLoad&&(this.newContainer=this.container.cloneNode(),this.container.after(this.newContainer))}run(t=this.config){this.config={...this.config,...t},this.init()}}class C{constructor(t){this.config=this.mergeOptions(t),this.element=this.getElement(this.config.element),this.init()}mergeOptions(t){return{element:"",item:"",...t}}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}createMansory(){const t=this.getGrid(),e=getComputedStyle(t.element).gridTemplateColumns.split(" ").length;t.columnsTotal!==e&&(t.columnsTotal=e,t.items.forEach((t=>t.style.removeProperty("margin-top"))),t.items.slice(e).forEach(((e,s)=>{const i=t.items[s].getBoundingClientRect().bottom,n=e.getBoundingClientRect().top;e.style.marginTop=i+t.gap-n+"px"})))}getGrid(){return{element:this.element,gap:parseFloat(getComputedStyle(this.element).gridRowGap),items:[...this.element.childNodes].filter((t=>1===t.nodeType)),columnsTotal:0}}resize(){const t=[...this.element.children],e=t=>{setTimeout((()=>{t.forEach((t=>this.createMansory()))}))};t.forEach((t=>{new ResizeObserver(e).observe(t)}))}init(){this.createMansory(),this.resize()}}class k extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(t),this.elements=this.getElements(this.config.element),this.init()}mergeOptions(t){return{element:"",event:"click",status:"on",toggle:!0,startOpened:"",multipleOpen:!1,outsideClose:!1,easing:"",easingOut:null,speed:0,speedOut:null,delay:0,delayOut:null,breakpoints:{},onClick:(t,e)=>{},onMouseover:(t,e)=>{},onMouseout:(t,e)=>{},onOpen:t=>{},onOpenEnd:t=>{},onClose:t=>{},onCloseEnd:t=>{},...t}}init(){this.setStatus(),this.setButtons(),this.setDropDowns(),this.config.startOpened&&"click"===this.config.event&&this.open(this.config.startOpened)}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}setStatus(){const t="on"===this.config.status;this.elements.forEach((e=>{e.classList.toggle("is-on",t),e.classList.toggle("is-off",!t),e.dataset.jetaccordionStatus=t?"on":""}))}setButtons(){this.elements.forEach((t=>{const e=t.id,s=this.getElements(`[aria-controls="${e}"]`),i=this.config.event;s.forEach((s=>{s.id=`jetaccordion-button-${e}`,s[`on${i}`]=this[`${i}ButtonHandler`].bind(this,t,e),"mouseover"!==i||this.config.outsideClose||(s.onmouseout=this.mouseoutButtonHandler.bind(this,t,e)),this.setButtonState(e,!1)}))}))}clickButtonHandler(t,e){if("off"===this.config.status)return;const s=t.dataset.jetaccordion.includes("visible");!this.config.multipleOpen&&this.closeAll([e]),this.config.toggle&&s?this.close(e):this.open(e),this.createCustomEvent("onClick",{event,element:t}),this.config.onClick(event,t)}mouseoverButtonHandler(t,e){if("off"===this.config.status)return;!t.dataset.jetaccordion.includes("visible")&&this.open(e),this.createCustomEvent("onMouseover",{event,element:t}),this.config.onMouseover(event,t)}mouseoutButtonHandler(t,e){t.dataset.jetaccordion.includes("visible")&&this.close(e),this.createCustomEvent("onMouseout",{event,element:t}),this.config.onMouseout(event,t)}setDropDowns(){this.elements.forEach((t=>{const e=`jetaccordion-button-${t.id}`;t.setAttribute("aria-labelledby",e)}))}addOutsideClose(t,e,s){this.config.outsideClose&&setTimeout((()=>{this.outsideHandler=this.outsideClose.bind(this,t,e,s),window.addEventListener(this.config.event,this.outsideHandler)}))}removeOutsideClose(){this.config.outsideClose&&window.removeEventListener(this.config.event,this.outsideHandler)}outsideClose(t,e,s){t.contains(event.target)||e.contains(event.target)||(this.close(s),"mouseover"===this.config.event&&(this.createCustomEvent("onMouseout",{event,element:e}),this.config.onMouseout(event,e)))}open(t){if("off"===this.config.status)return;const e=document.querySelector(`#${t}`),s=document.querySelector(`[aria-controls="${t}"]`),i=window.getComputedStyle(e).maxHeight;this.transitionendOpen=this.openEnd.bind(this),e.dataset.jetaccordion="visible",e.style.transition=this.setTransition("in"),e.style.height=!isNaN(parseFloat(i))&&isFinite(i)?i:`${e.scrollHeight}px`,e.classList.add("is-expanding","is-expanding-in"),e.addEventListener("transitionend",this.transitionendOpen,!1),this.addOutsideClose(s,e,t),this.setButtonState(t,!0),this.createCustomEvent("onOpen",{element:e}),this.config.onOpen(e)}openEnd(t){"visible"===t.target.dataset.jetaccordion&&(t.target.dataset.jetaccordion="visible expanded"),t.target.removeAttribute("style"),t.target.classList.add("is-expanded"),t.target.classList.remove("is-expanding","is-expanding-in"),t.target.removeEventListener("transitionend",this.transitionendOpen,!1),this.createCustomEvent("onOpenEnd",{element:t.target}),this.config.onOpenEnd(t.target)}openAll(t=[]){"off"!==this.config.status&&[...this.elements].filter((e=>!e.dataset.jetaccordion.includes("visible")&&!t.includes(e.id))).forEach((t=>this.open(t.id)))}close(t){if("off"===this.config.status)return;const e=document.querySelector(`#${t}`),s=window.getComputedStyle(e).minHeight;this.transitionendClose=this.closeEnd.bind(this),e.style.height=`${e.scrollHeight}px`,e.dataset.jetaccordion="",e.style.transition=this.setTransition("out"),setTimeout((()=>{e.style.height=!isNaN(parseFloat(s))&&isFinite(s)?s:""})),e.classList.add("is-expanding","is-expanding-out"),e.classList.remove("is-expanding-in","is-expanded"),e.removeEventListener("transitionend",this.transitionendOpen,!1),e.addEventListener("transitionend",this.transitionendClose,!1),this.removeOutsideClose(),this.setButtonState(t,!1),this.createCustomEvent("onClose",{element:e}),this.config.onClose(e)}closeEnd(t){t.target.removeAttribute("style"),t.target.classList.remove("is-expanding","is-expanding-out","is-expanded"),t.target.removeEventListener("transitionend",this.transitionendClose,!1),this.createCustomEvent("onCloseEnd",{element:t.target}),this.config.onCloseEnd(t.target)}closeAll(t=[]){"off"!==this.config.status&&[...this.elements].filter((e=>e.dataset.jetaccordion.includes("visible")&&!t.includes(e.id))).forEach((t=>this.close(t.id)))}setButtonState(t,e){this.getElements(`[aria-controls="${t}"]`).forEach((t=>{t.classList.toggle("is-active",e),t.setAttribute("aria-expanded",e)}))}setTransition(t){const e=this.getspeed(this.config.speed),s=this.getspeed(null!==this.config.speedOut?this.config.speedOut:this.config.speed),i=this.config.startOpened?0:`${"in"===t?e:s}ms`,n=this.config.easing,a=null!==this.config.easingOut?this.config.easingOut:this.config.easing,o="in"===t?n:a,r=this.config.delay,l=null!==this.config.delayOut?this.config.delayOut:this.config.delay,h=`${"in"===t?r:l}ms`;return this.config.startOpened="",`height ${i} ${o} ${h}`}getspeed(t){return t>0?t:1e-4}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setStatus()}}class T extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.button=this.getElement("[data-jetdropdown-button]",this.element),this.label=this.getElement("[data-jetdropdown-label]",this.element),this.icon=this.getElement("[data-jetdropdown-icon]",this.element),this.box=this.getElement("[data-jetdropdown-box]",this.element),this.baseId=this.getBaseId(),this.init()}mergeOptions(t){return{element:"",label:"",autoHeight:!0,autoPosition:!0,scrollbar:!1,breakpoints:{},onOpen:()=>{},onClose:()=>{},onClick:()=>{},...t}}init(){this.element&&(this.setButton(),this.setBox(),this.config.label&&this.setLabelValue(),this.setIcon())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getBaseId(){const t=[...document.querySelectorAll("[data-jetdropdown]")].indexOf(this.element);return this.element.id||`jetdropdown-${t}`}setButton(){this.button.type="button",this.button.setAttribute("role","combobox"),this.button.setAttribute("aria-haspopup","listbox"),this.button.setAttribute("aria-controls",this.baseId),this.button.setAttribute("aria-expanded",!1),this.button.onclick=this.buttonHandler.bind(this),this.button.onkeydown=this.keydownHandler.bind(this)}buttonHandler(t){t.preventDefault(),this.opened?this.close():this.open()}open(){this.opened||(this.clickOutsideHandler=this.clickOutside.bind(this),this.resizeHandler=this.resize.bind(this),window.addEventListener("pointerdown",this.clickOutsideHandler),window.addEventListener("resize",this.resizeHandler),this.managePageScrollBar(!1),this.setDropdownState(!0),this.resize(),this.createCustomEvent("onOpen"),this.config.onOpen())}close(){this.opened&&(window.removeEventListener("pointerdown",this.clickOutsideHandler),window.removeEventListener("resize",this.resizeHandler),this.managePageScrollBar(!0),this.setDropdownState(!1),this.createCustomEvent("onClose"),this.config.onClose())}clickOutside(t){this.element.contains(t.target)||this.close()}managePageScrollBar(t){if(this.config.scrollbar)return;const{body:e}=document,s=window.innerWidth-e.clientWidth,i=this.baseId.replace("-","-scrollbar-"),n=[...e.classList].filter((t=>t.includes("-scrollbar-"))).length;return!t&&n?e.classList.add(i):t&&n>1?e.classList.remove(i):(e.classList.toggle(i,!t),e.style.overflow=t?"":"hidden",void(e.style.paddingRight=t?"":`${s}px`))}setBox(){this.box.id=this.baseId}setDropdownState(t){const e=this.getTransitionType(this.box);this.opened=t,this.box.dataset.jetdropdownBox="opened",setTimeout((()=>this.box.classList.toggle("is-opened",t))),this.element.classList.toggle("is-opened",t),this.button.setAttribute("aria-expanded",t),this.button.focus(),this.manageBoxTransition(t,e)}manageBoxTransition(t,e){this.box.removeEventListener(`${e}end`,this.transitionEndHandler),!t&&e?(this.transitionEndHandler=this.hideBox.bind(this,e),this.box.addEventListener(`${e}end`,this.transitionEndHandler)):t||this.hideBox()}resize(){this.config.autoPosition&&(this.box.classList.toggle("is-opened-up",this.shouldOpenUp()),this.box.classList.toggle("is-opened-down",!this.shouldOpenUp())),this.config.autoHeight&&(this.box.style.maxHeight=this.setBoxHeight()||"")}shouldOpenUp(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=t-s;return e>n&&i>n}setBoxHeight(){const t=window.innerHeight,e=this.element.getBoundingClientRect().top,s=e+this.element.offsetHeight,i=this.box.offsetHeight,n=this.shouldOpenUp()?e:t-s;return n<i&&`${n}px`}getTransitionType(t){const e=window.getComputedStyle(t);return["transition","animation"].find((t=>parseFloat(e.getPropertyValue(`${t}-duration`))))}hideBox(t){this.box.dataset.jetdropdownBox="",this.box.removeAttribute("style"),t&&this.box.removeEventListener(`${t}end`,this.transitionEndHandler)}keydownHandler(t){switch(t.key){case"Home":case"End":case"ArrowUp":case"ArrowDown":return this.open();case"Escape":return this.close()}}setLabelValue(t=""){this.label&&(this.label.innerHTML=this.config.label||t)}setIcon(){this.icon&&this.icon.setAttribute("aria-hidden",!0)}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){}}class w extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.list=this.getElement(this.config.list,this.element),this.previousButton=this.getElement(this.config.previous,this.element),this.nextButton=this.getElement(this.config.next,this.element),this.firstButton=this.getElement(this.config.first,this.element),this.lastButton=this.getElement(this.config.last,this.element),this.classes=this.config.classes,this.aria=this.config.aria,this.active=this.getActive(),this.total=Number(this.config.total),this.init()}mergeOptions(t){const e={element:"",list:"",previous:"",next:"",first:"",last:"",gap:"",classes:this.getClasses(t),aria:this.getAria(),total:0,active:0,pagesToShow:8,start:0,left:0,right:0,end:0,link:!0,linkTarget:"",baseUrl:location.href,parameter:"pagina",joinWith:"-",concatenateWith:"-",query:!1,breakpoints:{},onChange:t=>{}};return this.mergeObjects(e,t)}mergeObjects(t,e){const s={...t,...e};for(const i in e)this.isObject(e[i])&&(s[i]={...t[i],...e[i]});return s}isObject(t){return!("object"!=typeof t||null===t||t instanceof Node||Array.isArray(t))}init(){this.element&&(this.setPagination(),this.createList(),this.setButtons(),this.checkButton())}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getClasses(t){const e=this.getBaseClass(t),s=e.includes("__")?"-":"__",i=`${e}${s}`;return{item:`${i}item`,button:`${i}button`,gap:`${i}gap`}}getBaseClass(t){let e=t.element;return t.classes&&t.classes.base?t.classes.base:("string"!=typeof e&&(e=e.classList[0]||e.id),e.replace(/[^a-zA-Z0-9-_]/g,""))}getAria(){return{element:{"aria-label":"Paginação"},button:{"aria-label":"Ir para página {index}"},"button-active":{"aria-label":"Página {index}"},first:{"aria-label":"Ir para primeira página"},previous:{"aria-label":"Ir para página anterior"},next:{"aria-label":"Ir para próxima página"},last:{"aria-label":"Ir para última página"}}}getActive(){const{baseUrl:t,active:e,parameter:s,query:i,joinWith:n}=this.config,a=location.pathname.includes(s)&&location.pathname.split(`${s}${n}`)[1]?location.pathname.split(`${s}${n}`)[1].split("?")[0]:1,o=new URL(t).searchParams.get(i);return Number(e||(o||a))}setPagination(){const t=this.element.getAttribute("aria-label")||this.aria.element["aria-label"];this.element.setAttribute("aria-label",t)}createList(){if(!this.list)return;this.setTotalPerView();const t=this.setPagesArray(this.active,this.total),e=new DocumentFragment;this.list.innerHTML="",t.forEach((t=>{const s=t===this.config.gap?this.createGap(t):this.createPage(t);e.append(s)})),this.list.append(e)}setTotalPerView(){if(this.config.left||this.config.right)return;const t=Math.floor(this.config.pagesToShow/2);let e=t,s=this.config.pagesToShow-e-1;this.active<=t?(e=this.active-1,s=this.config.pagesToShow-e-1):this.active>this.total-t&&(s=this.total-this.active,e=this.config.pagesToShow-s-1),this.config.left=Math.min(e,this.active-1),this.config.right=Math.min(s,this.total-this.active)}setPagesArray(t,e){const s=[...Array(e).keys()],{start:i,left:n,right:a,end:o,gap:r}=this.config;return s.reduce(((s,l)=>{const h=l+1,c=h<=i,u=h>=t-n&&h<=t+a,d=h>=e-o+1,g=s.slice(-1)[0]===r;let m=h;return c||u||d||(m=g||""===r?[]:r),s.concat(m)}),[])}createPage(t){const e=document.createElement("li"),s=this.config.link?"a":"button",i=document.createElement(s),n=this.aria.button["aria-label"].replace("{index}",t);return e.className=this.classes.item,e.dataset.jetpaginationItem="",i.className=this.classes.button,i.dataset.jetpaginationButton="",i.setAttribute("aria-label",n),i.innerHTML=t,this.config.link||(i.type="button"),this.pageState(i,t),this.config.link?(this.setLink(i,t),i.onclick=()=>{this.createCustomEvent("onChange",{page:t}),this.config.onChange(t)}):i.onclick=this.gotoPage.bind(this,t),e.append(i),e}pageState(t,e){if(e!==this.active)return;const s=this.aria["button-active"]["aria-label"].replace("{index}",e);t.className+=" is-active",t.setAttribute("aria-label",s),t.setAttribute("aria-current",!0)}createGap(t){const e=document.createElement("li");return e.className=this.classes.gap,e.dataset.jetpaginationGap="",e.innerHTML=t,e}setLink(t,e){t.href=this.getLink(e),this.config.linkTarget&&(t.target=this.config.linkTarget)}getLink(t){const{baseUrl:e,parameter:s,joinWith:i,concatenateWith:n,query:a}=this.config,o=`${s}${i}${this.active}`,r=`${a}=${this.active}`,l=this.cleanUrl(e,o,r,n),{pathname:h,search:c}=new URL(l);let u=`${h}${c}`;return 1===t||(s&&(u=this.setUrlWithParameter(h,c,s,i,n,t)),a&&(u=this.setUrlWithQuery(h,c,a,t))),u}cleanUrl(t,e,s,i){return t.replace(e,"").replace(s,"").replace(/[?&]$/,"").replace(new RegExp(`${i}$`),"?").replace(`${i}?`,"?")}setUrlWithParameter(t,e,s,i,n,a){return n=t.endsWith("/")||t.endsWith(n)?"":n,`${t}${n}${s=`${s}${i}${a}`}${e}`}setUrlWithQuery(t,e,s,i){return`${t}${e}${e?"&":"?"}${s=`${s}=${i}`}`}gotoPage(t){const e=this.config.link?this.getLink(t):t;this.active=Number(t),this.config.link&&this.setButtons(),this.createList(),this.checkButton(),this.createCustomEvent("onChange",{page:e}),this.config.onChange(e)}setButtons(){const t={first:1,previous:this.active-1,next:this.active+1,last:this.total};Object.entries(t).forEach((([t,e])=>{this.setButton(t,e)}))}setButton(t,e){const s=this[`${t}Button`];if(!s)return;const i=s.getAttribute("aria-label")||this.aria[t]["aria-label"];s.setAttribute("aria-label",i),this.config.link&&this.setLink(s,e),this.config.link?(this.setLink(s,e),s.onclick=()=>{this.createCustomEvent("onChange",{page:e}),this.config.onChange(e)}):s.onclick=this[t].bind(this)}first(){this.gotoPage(1)}previous(){this.gotoPage(this.active-1)}next(){this.gotoPage(this.active+1)}last(){this.gotoPage(this.total)}checkButton(){const t=1===this.active,e=this.active===this.total;this.buttonState(this.firstButton,t),this.buttonState(this.previousButton,t),this.buttonState(this.nextButton,e),this.buttonState(this.lastButton,e)}buttonState(t,e){t&&(t.classList.toggle("is-disabled",e),e&&t.removeAttribute("href"),e&&t.setAttribute("aria-disabled",!0),t.disabled=e)}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.createList(),this.checkButton()}}class O extends EventTarget{constructor(t){super(),this.config=this.mergeOptions(t),this.setBreakpoints(this.config),this.element=this.getElement(this.config.element),this.buttons=this.getElements(this.config.button,this.element),this.boxes=this.getElements(this.config.box,this.element),this.startOpened=this.setStartOpened(this.config.startOpened),this.init()}mergeOptions(t){return{element:"",button:"[data-jettabs-button]",box:"[data-jettabs-box]",status:"on",startOpened:"",openDelay:0,closeDelay:0,breakpoints:{},onClick:(t,e)=>{},onOpen:t=>{},onOpenEnd:t=>{},onClose:t=>{},onCloseEnd:t=>{},...t}}init(){this.setTabs(),this.setStatus(),this.setButtons(),this.setBoxes(),this.setButtonState(this.startOpened,!0),this.setBoxState(this.startOpened,!0)}getElement(t,e=document){return t&&"string"==typeof t?e.querySelector(t):t}getElements(t,e=document){if(t)return"string"==typeof t?e.querySelectorAll(t):[t]}setTabs(){this.element.setAttribute("role","tablist")}setStatus(){const t="on"===this.config.status;this.boxes.forEach((e=>{e.classList.toggle("is-on",t),e.classList.toggle("is-off",!t),e.dataset.jettabsStatus=t?"on":""}))}setStartOpened(t){if(t)return t;return this.element.querySelector("[data-jettabs-box]").id}setButtons(){this.buttons.forEach((t=>{t.type="button",t.tabIndex=-1,t.setAttribute("role","tab"),t.onclick=this.clickButtonHandler.bind(this),t.onkeydown=this.keydownHandler.bind(this)}))}clickButtonHandler(t){if("off"===this.config.status)return;const e=t.currentTarget.getAttribute("aria-controls"),s=this.element.querySelector(`#${e}`);t.currentTarget.focus(),this.open(e),this.createCustomEvent("onClick",{event:t,box:s}),this.config.onClick(t,s)}keydownHandler(t){switch(t.key){case"Home":return this.firstTab();case"End":return this.lastTab();case"ArrowUp":case"ArrowLeft":return this.previousTab();case"ArrowDown":case"ArrowRight":return this.nextTab()}}firstTab(){this.element.querySelector("[data-jettabs-box]:first-of-type").focus()}lastTab(){this.element.querySelector("[data-jettabs-box]:last-of-type").focus()}previousTab(){const t=[...this.buttons].findIndex((t=>t===document.activeElement))-1;this.buttons[(t+this.buttons.length)%this.buttons.length].focus()}nextTab(){const t=[...this.buttons].findIndex((t=>t===document.activeElement))+1;this.buttons[t%this.buttons.length].focus()}setBoxes(){this.boxes.forEach((t=>{const e=t.id;t.setAttribute("role","tabpanel"),t.setAttribute("aria-labelledby",e)}))}open(t){if("off"===this.config.status||this.isTransitioning())return;const e=this.element.querySelector(`#${t}`),s=this.element.querySelector("[data-jettabs-box].is-active");s&&this.close(s.id),this.setButtonState(t,!0),this.createCustomEvent("onOpen",{box:e}),this.config.onOpen(e),setTimeout((()=>{this.setBoxState(t,!0),this.createCustomEvent("onOpenEnd",{box:e}),this.config.onOpenEnd(e)}),this.config.openDelay)}close(t){if("off"===this.config.status||this.isTransitioning())return;const e=this.element.querySelector(`#${t}`);this.setButtonState(t,!1),this.createCustomEvent("onClose",{box:e}),this.config.onClose(e),setTimeout((()=>{this.setBoxState(t,!1),this.createCustomEvent("onCloseEnd",{box:e}),this.config.onCloseEnd(e)}),this.config.closeDelay)}isTransitioning(){const t=this.element.querySelector("[data-jettabs-box].is-active").id;return!this.element.querySelector(`#${t}.is-active`)}setButtonState(t,e){const s=this.getElement(`[aria-controls="${t}"]`);s&&(s.setAttribute("aria-selected",e),s.tabIndex=e?0:-1,s.classList.toggle("is-active",e))}setBoxState(t,e){this.getElement(`#${t}`).classList.toggle("is-active",e)}createCustomEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}setBreakpoints(t){let{breakpoints:e}=this.config;if(!Object.keys(e).length)return;const s=e.mobile&&this.isMobile();e.fullscreen=t,s?e={fullscreen:e.mobile}:delete e.mobile,this.matchMedia(e)}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}matchMedia(t){const e=Object.entries(t);e.forEach((([t,s],i)=>{const n=e[i-1]?e[i-1][0]:0,a="fullscreen"===t?"":` and (max-width: ${t}px)`,o=window.matchMedia(`(min-width: ${n}px)${a}`);o.addListener(this.matchMediaHandler.bind(this,o,s,!1)),this.matchMediaHandler(o,s,!0)}))}matchMediaHandler(t,e,s){t.matches&&(this.config={...this.config,...e},!s&&this.update())}update(){this.setStatus()}}return e})()));